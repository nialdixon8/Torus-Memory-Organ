(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Ipns = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Ipns=(()=>{var sl=Object.create;var Xr=Object.defineProperty;var al=Object.getOwnPropertyDescriptor;var cl=Object.getOwnPropertyNames;var ul=Object.getPrototypeOf,ll=Object.prototype.hasOwnProperty;var ps=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),xe=(r,e)=>{for(var t in e)Xr(r,t,{get:e[t],enumerable:!0})},gs=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of cl(e))!ll.call(r,o)&&o!==t&&Xr(r,o,{get:()=>e[o],enumerable:!(n=al(e,o))||n.enumerable});return r};var ms=(r,e,t)=>(t=r!=null?sl(ul(r)):{},gs(e||!r||!r.__esModule?Xr(t,"default",{value:r,enumerable:!0}):t,r)),fl=r=>gs(Xr({},"__esModule",{value:!0}),r);var va=ps(ar=>{"use strict";var Rh="[object ArrayBuffer]",st=class r{static isArrayBuffer(e){return Object.prototype.toString.call(e)===Rh}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){let n=r.toUint8Array(e),o=r.toUint8Array(t);if(n.length!==o.byteLength)return!1;for(let i=0;i<n.length;i++)if(n[i]!==o[i])return!1;return!0}static concat(...e){let t;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?t=e[0]:e[e.length-1]instanceof Function?t=e.slice(0,e.length-1):t=e;let n=0;for(let s of t)n+=s.byteLength;let o=new Uint8Array(n),i=0;for(let s of t){let a=this.toUint8Array(s);o.set(a,i),i+=a.length}return e[e.length-1]instanceof Function?this.toView(o,e[e.length-1]):o.buffer}},Li="string",Vh=/^[0-9a-f]+$/i,Lh=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,Fh=/^[a-zA-Z0-9-_]+$/,vn=class{static fromString(e){let t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n.buffer}static toString(e){let t=st.toUint8Array(e),n="";for(let i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return decodeURIComponent(escape(n))}},Le=class{static toString(e,t=!1){let n=st.toArrayBuffer(e),o=new DataView(n),i="";for(let s=0;s<n.byteLength;s+=2){let a=o.getUint16(s,t);i+=String.fromCharCode(a)}return i}static fromString(e,t=!1){let n=new ArrayBuffer(e.length*2),o=new DataView(n);for(let i=0;i<e.length;i++)o.setUint16(i*2,e.charCodeAt(i),t);return n}},Bn=class r{static isHex(e){return typeof e===Li&&Vh.test(e)}static isBase64(e){return typeof e===Li&&Lh.test(e)}static isBase64Url(e){return typeof e===Li&&Fh.test(e)}static ToString(e,t="utf8"){let n=st.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return Le.toString(n,!0);case"utf16":case"utf16be":return Le.toString(n);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Le.fromString(e,!0);case"utf16":case"utf16be":return Le.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){let t=st.toUint8Array(e);if(typeof btoa<"u"){let n=this.ToString(t,"binary");return btoa(n)}else return Buffer.from(t).toString("base64")}static FromBase64(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!r.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!r.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=r.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return vn.fromString(e);case"utf16":case"utf16be":return Le.fromString(e);case"utf16le":case"usc2":return Le.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=r.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return vn.toString(e);case"utf16":case"utf16be":return Le.toString(e);case"utf16le":case"usc2":return Le.toString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){let t=e.length,n=new Uint8Array(t);for(let o=0;o<t;o++)n[o]=e.charCodeAt(o);return n.buffer}static ToBinary(e){let t=st.toUint8Array(e),n="";for(let o=0;o<t.length;o++)n+=String.fromCharCode(t[o]);return n}static ToHex(e){let t=st.toUint8Array(e),n="",o=t.length;for(let i=0;i<o;i++){let s=t[i];s<16&&(n+="0"),n+=s.toString(16)}return n}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!r.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);let n=new Uint8Array(t.length/2);for(let o=0;o<t.length;o=o+2){let i=t.slice(o,o+2);n[o/2]=parseInt(i,16)}return n.buffer}static ToUtf16String(e,t=!1){return Le.toString(e,t)}static FromUtf16String(e,t=!1){return Le.fromString(e,t)}static Base64Padding(e){let t=4-e.length%4;if(t<4)for(let n=0;n<t;n++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}};Bn.DEFAULT_UTF8_ENCODING="utf8";function Hh(r,...e){let t=arguments[0];for(let n=1;n<arguments.length;n++){let o=arguments[n];for(let i in o)t[i]=o[i]}return t}function Oh(...r){let e=r.map(o=>o.byteLength).reduce((o,i)=>o+i),t=new Uint8Array(e),n=0;return r.map(o=>new Uint8Array(o)).forEach(o=>{for(let i of o)t[n++]=i}),t.buffer}function Dh(r,e){if(!(r&&e)||r.byteLength!==e.byteLength)return!1;let t=new Uint8Array(r),n=new Uint8Array(e);for(let o=0;o<r.byteLength;o++)if(t[o]!==n[o])return!1;return!0}ar.BufferSourceConverter=st;ar.Convert=Bn;ar.assign=Hh;ar.combine=Oh;ar.isEqual=Dh});var _c=ps((Uy,Zi)=>{var Iy=function(){typeof Zi<"u"&&(Zi.exports=y);var r=86400,e=3200,t=146097*e/400,n=r*t,o=1e3*n,i=864e13,s=4294967296,a=1e6,c="000000000",f=Math.trunc||function(x){var b=x-x%1;return b==0&&(x<0||x===0&&1/x!=1/0)?-0:b},u=y.prototype,l=(y.fromDate=function(x){return new y(+x)},y.fromInt64BE=N(0,1,2,3,0,4),y.fromInt64LE=N(3,2,1,0,4,0),y.fromString=function(_){var b,O=new y,_=(_+="").replace(/^\s*[+\-]?\d+/,function(P){var P=+P,E=1970+(P-1970)%400;return O.year=P-E,E}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(I,P,E){return P<0&&(E*=-1),b=6e4*(60*+P+ +E),""}).replace(/\.\d+$/,function(I){return O.nano=+(I+c).substr(1,9),""}).split(/\D+/);if(1<_.length?_[1]--:_[1]=0,O.time=b=Date.UTC.apply(Date,_)-(b||0),isNaN(b))throw new TypeError("Invalid Date");return d(O)},y.fromTimeT=function(x){return T(x,0)},u.year=0,u.time=0,u.nano=0,u.addNano=function(x){return this.nano+=+x||0,this},u.getNano=function(){var x=d(this);return(x.time%1e3*a+ +x.nano+1e9)%1e9},u.getTimeT=function(){var b=d(this),x=Math.floor(b.time/1e3),b=b.year;return b&&(x+=b*t*r/e),x},u.getYear=function(){return this.toDate().getUTCFullYear()+this.year},u.toDate=function(){return v(d(this).time)},u.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},u.toString=function(x){var b=this,O=b.toDate(),_={H:function(){return L(O.getUTCHours())},L:function(){return U(O.getUTCMilliseconds(),3)},M:function(){return L(O.getUTCMinutes())},N:function(){return U(b.getNano(),9)},S:function(){return L(O.getUTCSeconds())},Y:function(){var I=b.getYear();return 999999<I?"+"+I:9999<I?"+"+U(I,6):0<=I?U(I,4):-999999<=I?"-"+U(-I,6):I},a:function(){return S[O.getUTCDay()]},b:function(){return h[O.getUTCMonth()]},d:function(){return L(O.getUTCDate())},e:function(){return function(I){return(9<I?"":" ")+(0|I)}(O.getUTCDate())},m:function(){return L(O.getUTCMonth()+1)}};return function I(P){return P.replace(/%./g,function(E){var m=E[1],A=k[m],m=_[m];return A?I(A):m?m():E})}(x||l)},u.writeInt64BE=w(0,1,2,3,0,4),u.writeInt64LE=w(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return y;function y(x,b,O){var _=this;if(!(_ instanceof y))return new y(x,b,O);_.time=+x||0,_.nano=+b||0,_.year=+O||0,d(_)}function d(x){var b,O,_,I=x.year,P=x.time,E=x.nano,A=((E<0||a<=E)&&(E-=(O=Math.floor(E/a))*a,P+=O,O=1),I%e);return(P<-i||i<P||A)&&((b=f(P/o))&&(I+=b*e,P-=b*o),(_=v(P)).setUTCFullYear(A+_.getUTCFullYear()),_=(P=+_)+(b=f((I-=A)/e))*o,b&&-i<=_&&_<=i&&(I-=b*e,P=_),O=1),O&&(x.year=I,x.time=P,x.nano=E),x}function v(x){var b=new Date(0);return b.setTime(x),b}function T(I,_){I=+I||0;var O=f((_=(_|0)*s)/n)+f(I/n),_=_%n+I%n,I=f(_/n);return I&&(O+=I,_-=I*n),new y(1e3*_,0,O*e)}function w(x,b,O,_,I,P){return function(A,m){var B=d(this);A=A||new Array(8),H(A,m|=0);var F=Math.floor(B.time/1e3),B=B.year*(t*r/e),p=f(B/s)+f(F/s),B=B%s+F%s,F=Math.floor(B/s);return F&&(p+=F,B-=F*s),E(A,m+I,p),E(A,m+P,B),A};function E(A,m,p){A[m+x]=p>>24&255,A[m+b]=p>>16&255,A[m+O]=p>>8&255,A[m+_]=255&p}}function N(x,b,O,_,I,P){return function(A,m){H(A,m|=0);var p=E(A,m+I);return T(E(A,m+P),p)};function E(A,m){return 16777216*A[m+x]+(A[m+b]<<16|A[m+O]<<8|A[m+_])}}function H(x,b){if(x=x&&x.length,x==null)throw new TypeError("Invalid Buffer");if(x<b+8)throw new RangeError("Out of range")}function L(x){return(9<x?"":"0")+(0|x)}function U(x,b){return(c+(0|x)).substr(-b)}}()});var c0={};xe(c0,{createIPNSRecord:()=>i0,createIPNSRecordWithExpiration:()=>s0,extractPublicKeyFromIPNSRecord:()=>Mu,marshalIPNSRecord:()=>Ku,multihashFromIPNSRoutingKey:()=>Gu,multihashToIPNSRoutingKey:()=>zu,namespace:()=>Ju,namespaceLength:()=>o0,unmarshalIPNSRecord:()=>qu});var Ae=class extends Error{static name="InvalidParametersError";constructor(e="Invalid parameters"){super(e),this.name="InvalidParametersError"}},qt=class extends Error{static name="InvalidPublicKeyError";constructor(e="Invalid public key"){super(e),this.name="InvalidPublicKeyError"}};var Qr=class extends Error{static name="InvalidMultihashError";constructor(e="Invalid Multihash"){super(e),this.name="InvalidMultihashError"}};var en=class extends Error{static name="UnsupportedKeyTypeError";constructor(e="Unsupported key type"){super(e),this.name="UnsupportedKeyTypeError"}};var Oo={};xe(Oo,{base58btc:()=>ae,base58flickr:()=>yl});var f0=new Uint8Array(0);function ys(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function et(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function xs(r){return new TextEncoder().encode(r)}function ws(r){return new TextDecoder().decode(r)}function hl(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var i=r.charAt(o),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=o}var a=r.length,c=r.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(k){if(k instanceof Uint8Array||(ArrayBuffer.isView(k)?k=new Uint8Array(k.buffer,k.byteOffset,k.byteLength):Array.isArray(k)&&(k=Uint8Array.from(k))),!(k instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(k.length===0)return"";for(var y=0,d=0,v=0,T=k.length;v!==T&&k[v]===0;)v++,y++;for(var w=(T-v)*u+1>>>0,N=new Uint8Array(w);v!==T;){for(var H=k[v],L=0,U=w-1;(H!==0||L<d)&&U!==-1;U--,L++)H+=256*N[U]>>>0,N[U]=H%a>>>0,H=H/a>>>0;if(H!==0)throw new Error("Non-zero carry");d=L,v++}for(var x=w-d;x!==w&&N[x]===0;)x++;for(var b=c.repeat(y);x<w;++x)b+=r.charAt(N[x]);return b}function h(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return new Uint8Array;var y=0;if(k[y]!==" "){for(var d=0,v=0;k[y]===c;)d++,y++;for(var T=(k.length-y)*f+1>>>0,w=new Uint8Array(T);k[y];){var N=t[k.charCodeAt(y)];if(N===255)return;for(var H=0,L=T-1;(N!==0||H<v)&&L!==-1;L--,H++)N+=a*w[L]>>>0,w[L]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");v=H,y++}if(k[y]!==" "){for(var U=T-v;U!==T&&w[U]===0;)U++;for(var x=new Uint8Array(d+(T-U)),b=d;U!==T;)x[b++]=w[U++];return x}}}function S(k){var y=h(k);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:h,decode:S}}var dl=hl,pl=dl,vs=pl;var Vo=class{name;prefix;baseEncode;constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Lo=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Bs(this,e)}},Fo=class{decoders;constructor(e){this.decoders=e}or(e){return Bs(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Bs(r,e){return new Fo({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}var Ho=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,t,n,o){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new Vo(e,t,n),this.decoder=new Lo(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function zt({name:r,prefix:e,encode:t,decode:n}){return new Ho(r,e,t,n)}function mt({name:r,prefix:e,alphabet:t}){let{encode:n,decode:o}=vs(t,r);return zt({prefix:e,name:r,encode:n,decode:i=>et(o(i))})}function gl(r,e,t,n){let o={};for(let u=0;u<e.length;++u)o[e[u]]=u;let i=r.length;for(;r[i-1]==="=";)--i;let s=new Uint8Array(i*t/8|0),a=0,c=0,f=0;for(let u=0;u<i;++u){let l=o[r[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|l,a+=t,a>=8&&(a-=8,s[f++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s}function ml(r,e,t){let n=e[e.length-1]==="=",o=(1<<t)-1,i="",s=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],s+=8;s>t;)s-=t,i+=e[o&a>>s];if(s!==0&&(i+=e[o&a<<t-s]),n)for(;i.length*t&7;)i+="=";return i}function te({name:r,prefix:e,bitsPerChar:t,alphabet:n}){return zt({prefix:e,name:r,encode(o){return ml(o,n,t)},decode(o){return gl(o,n,t,r)}})}var ae=mt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yl=mt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Do={};xe(Do,{base32:()=>yt,base32hex:()=>vl,base32hexpad:()=>El,base32hexpadupper:()=>Al,base32hexupper:()=>Bl,base32pad:()=>wl,base32padupper:()=>bl,base32upper:()=>xl,base32z:()=>Sl});var yt=te({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xl=te({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),wl=te({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),bl=te({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vl=te({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Bl=te({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),El=te({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Al=te({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Sl=te({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var kl=Ss,Es=128,Cl=127,Tl=~Cl,Nl=Math.pow(2,31);function Ss(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Nl;)e[t++]=r&255|Es,r/=128;for(;r&Tl;)e[t++]=r&255|Es,r>>>=7;return e[t]=r|0,Ss.bytes=t-n+1,e}var Il=Mo,Ul=128,As=127;function Mo(r,n){var t=0,n=n||0,o=0,i=n,s,a=r.length;do{if(i>=a)throw Mo.bytes=0,new RangeError("Could not decode varint");s=r[i++],t+=o<28?(s&As)<<o:(s&As)*Math.pow(2,o),o+=7}while(s>=Ul);return Mo.bytes=i-n,t}var _l=Math.pow(2,7),Rl=Math.pow(2,14),Vl=Math.pow(2,21),Ll=Math.pow(2,28),Fl=Math.pow(2,35),Hl=Math.pow(2,42),Ol=Math.pow(2,49),Dl=Math.pow(2,56),Ml=Math.pow(2,63),$l=function(r){return r<_l?1:r<Rl?2:r<Vl?3:r<Ll?4:r<Fl?5:r<Hl?6:r<Ol?7:r<Dl?8:r<Ml?9:10},Pl={encode:kl,decode:Il,encodingLength:$l},Kl=Pl,vr=Kl;function Br(r,e=0){return[vr.decode(r,e),vr.decode.bytes]}function Gt(r,e,t=0){return vr.encode(r,e,t),e}function jt(r){return vr.encodingLength(r)}function Oe(r,e){let t=e.byteLength,n=jt(r),o=n+jt(t),i=new Uint8Array(o+t);return Gt(r,i,0),Gt(t,i,n),i.set(e,o),new Zt(r,t,e,i)}function rn(r){let e=et(r),[t,n]=Br(e),[o,i]=Br(e.subarray(n)),s=e.subarray(n+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new Zt(t,o,s,e)}function ks(r,e){if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&ys(r.bytes,t.bytes)}}var Zt=class{code;size;digest;bytes;constructor(e,t,n,o){this.code=e,this.size=t,this.digest=n,this.bytes=o}};function Cs(r,e){let{bytes:t,version:n}=r;switch(n){case 0:return zl(t,$o(r),e??ae.encoder);default:return Gl(t,$o(r),e??yt.encoder)}}var Ts=new WeakMap;function $o(r){let e=Ts.get(r);if(e==null){let t=new Map;return Ts.set(r,t),t}return e}var we=class r{code;version;multihash;bytes;"/";constructor(e,t,n,o){this.code=t,this.version=e,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==Er)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==jl)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Oe(e,t);return r.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return r.equals(this,e)}static equals(e,t){let n=t;return n!=null&&e.code===n.code&&e.version===n.version&&ks(e.multihash,n.multihash)}toString(e){return Cs(this,e)}toJSON(){return{"/":Cs(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof r)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:o,multihash:i,bytes:s}=t;return new r(n,o,i,s??Ns(n,o,i.bytes))}else if(t[Zl]===!0){let{version:n,multihash:o,code:i}=t,s=rn(o);return r.create(n,i,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Er)throw new Error(`Version 0 CID must use dag-pb (code: ${Er}) block encoding`);return new r(e,t,n,n.bytes)}case 1:{let o=Ns(e,t,n.bytes);return new r(e,t,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return r.create(0,Er,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){let[t,n]=r.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=r.inspectBytes(e),n=t.size-t.multihashSize,o=et(e.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");let i=o.subarray(t.multihashSize-t.digestSize),s=new Zt(t.multihashCode,t.digestSize,i,o);return[t.version===0?r.createV0(s):r.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[l,h]=Br(e.subarray(t));return t+=h,l},o=n(),i=Er;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let s=t,a=n(),c=n(),f=t+c,u=f-s;return{version:o,codec:i,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(e,t){let[n,o]=ql(e,t),i=r.decode(o);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return $o(i).set(n,e),i}};function ql(r,e){switch(r[0]){case"Q":{let t=e??ae;return[ae.prefix,t.decode(`${ae.prefix}${r}`)]}case ae.prefix:{let t=e??ae;return[ae.prefix,t.decode(r)]}case yt.prefix:{let t=e??yt;return[yt.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function zl(r,e,t){let{prefix:n}=t;if(n!==ae.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let o=e.get(n);if(o==null){let i=t.encode(r).slice(1);return e.set(n,i),i}else return o}function Gl(r,e,t){let{prefix:n}=t,o=e.get(n);if(o==null){let i=t.encode(r);return e.set(n,i),i}else return o}var Er=112,jl=18;function Ns(r,e,t){let n=jt(r),o=n+jt(e),i=new Uint8Array(o+t.byteLength);return Gt(r,i,0),Gt(e,i,n),i.set(t,o),i}var Zl=Symbol.for("@ipld/js-cid/CID");var Po={};xe(Po,{identity:()=>Ar});var Is=0,Wl="identity",Us=et;function Jl(r){return Oe(Is,Us(r))}var Ar={code:Is,name:Wl,encode:Us,digest:Jl};function Ge(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function _s(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function Yl(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function Jt(r,...e){if(!Yl(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${r.length}`)}function Rs(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_s(r.outputLen),_s(r.blockLen)}function Yt(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Vs(r,e){Jt(r);let t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var Rt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var nn=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),De=(r,e)=>r<<32-e|r>>>e;var _0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ls(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Sr(r){return typeof r=="string"&&(r=Ls(r)),Jt(r),r}function Ko(...r){let e=0;for(let n=0;n<r.length;n++){let o=r[n];Jt(o),e+=o.length}let t=new Uint8Array(e);for(let n=0,o=0;n<r.length;n++){let i=r[n];t.set(i,o),o+=i.length}return t}var Xt=class{clone(){return this._cloneInto()}},R0={}.toString;function on(r){let e=n=>r().update(Sr(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function sn(r=32){if(Rt&&typeof Rt.getRandomValues=="function")return Rt.getRandomValues(new Uint8Array(r));if(Rt&&typeof Rt.randomBytes=="function")return Rt.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function Xl(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let o=BigInt(32),i=BigInt(4294967295),s=Number(t>>o&i),a=Number(t&i),c=n?4:0,f=n?0:4;r.setUint32(e+c,s,n),r.setUint32(e+f,a,n)}var Fs=(r,e,t)=>r&e^~r&t,Hs=(r,e,t)=>r&e^r&t^e&t,Qt=class extends Xt{constructor(e,t,n,o){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=nn(this.buffer)}update(e){Yt(this);let{view:t,buffer:n,blockLen:o}=this;e=Sr(e);let i=e.length;for(let s=0;s<i;){let a=Math.min(o-this.pos,i-s);if(a===o){let c=nn(e);for(;o<=i-s;s+=o)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Yt(this),Vs(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:o,isLE:i}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(n,0),s=0);for(let l=s;l<o;l++)t[l]=0;Xl(n,o-8,BigInt(this.length*8),i),this.process(n,0);let a=nn(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)a.setUint32(4*l,u[l],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:o,finished:i,destroyed:s,pos:a}=this;return e.length=o,e.pos=a,e.finished=i,e.destroyed=s,o%t&&e.buffer.set(n),e}};var an=BigInt(4294967295),qo=BigInt(32);function Os(r,e=!1){return e?{h:Number(r&an),l:Number(r>>qo&an)}:{h:Number(r>>qo&an)|0,l:Number(r&an)|0}}function Ql(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let o=0;o<r.length;o++){let{h:i,l:s}=Os(r[o],e);[t[o],n[o]]=[i,s]}return[t,n]}var ef=(r,e)=>BigInt(r>>>0)<<qo|BigInt(e>>>0),tf=(r,e,t)=>r>>>t,rf=(r,e,t)=>r<<32-t|e>>>t,nf=(r,e,t)=>r>>>t|e<<32-t,of=(r,e,t)=>r<<32-t|e>>>t,sf=(r,e,t)=>r<<64-t|e>>>t-32,af=(r,e,t)=>r>>>t-32|e<<64-t,cf=(r,e)=>e,uf=(r,e)=>r,lf=(r,e,t)=>r<<t|e>>>32-t,ff=(r,e,t)=>e<<t|r>>>32-t,hf=(r,e,t)=>e<<t-32|r>>>64-t,df=(r,e,t)=>r<<t-32|e>>>64-t;function pf(r,e,t,n){let o=(e>>>0)+(n>>>0);return{h:r+t+(o/2**32|0)|0,l:o|0}}var gf=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),mf=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,yf=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),xf=(r,e,t,n,o)=>e+t+n+o+(r/2**32|0)|0,wf=(r,e,t,n,o)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(o>>>0),bf=(r,e,t,n,o,i)=>e+t+n+o+i+(r/2**32|0)|0;var vf={fromBig:Os,split:Ql,toBig:ef,shrSH:tf,shrSL:rf,rotrSH:nf,rotrSL:of,rotrBH:sf,rotrBL:af,rotr32H:cf,rotr32L:uf,rotlSH:lf,rotlSL:ff,rotlBH:hf,rotlBL:df,add:pf,add3L:gf,add3H:mf,add4L:yf,add4H:xf,add5H:bf,add5L:wf},K=vf;var[Bf,Ef]=K.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),xt=new Uint32Array(80),wt=new Uint32Array(80),zo=class extends Qt{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:n,Bl:o,Ch:i,Cl:s,Dh:a,Dl:c,Eh:f,El:u,Fh:l,Fl:h,Gh:S,Gl:k,Hh:y,Hl:d}=this;return[e,t,n,o,i,s,a,c,f,u,l,h,S,k,y,d]}set(e,t,n,o,i,s,a,c,f,u,l,h,S,k,y,d){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=o|0,this.Ch=i|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=u|0,this.Fh=l|0,this.Fl=h|0,this.Gh=S|0,this.Gl=k|0,this.Hh=y|0,this.Hl=d|0}process(e,t){for(let w=0;w<16;w++,t+=4)xt[w]=e.getUint32(t),wt[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){let N=xt[w-15]|0,H=wt[w-15]|0,L=K.rotrSH(N,H,1)^K.rotrSH(N,H,8)^K.shrSH(N,H,7),U=K.rotrSL(N,H,1)^K.rotrSL(N,H,8)^K.shrSL(N,H,7),x=xt[w-2]|0,b=wt[w-2]|0,O=K.rotrSH(x,b,19)^K.rotrBH(x,b,61)^K.shrSH(x,b,6),_=K.rotrSL(x,b,19)^K.rotrBL(x,b,61)^K.shrSL(x,b,6),I=K.add4L(U,_,wt[w-7],wt[w-16]),P=K.add4H(I,L,O,xt[w-7],xt[w-16]);xt[w]=P|0,wt[w]=I|0}let{Ah:n,Al:o,Bh:i,Bl:s,Ch:a,Cl:c,Dh:f,Dl:u,Eh:l,El:h,Fh:S,Fl:k,Gh:y,Gl:d,Hh:v,Hl:T}=this;for(let w=0;w<80;w++){let N=K.rotrSH(l,h,14)^K.rotrSH(l,h,18)^K.rotrBH(l,h,41),H=K.rotrSL(l,h,14)^K.rotrSL(l,h,18)^K.rotrBL(l,h,41),L=l&S^~l&y,U=h&k^~h&d,x=K.add5L(T,H,U,Ef[w],wt[w]),b=K.add5H(x,v,N,L,Bf[w],xt[w]),O=x|0,_=K.rotrSH(n,o,28)^K.rotrBH(n,o,34)^K.rotrBH(n,o,39),I=K.rotrSL(n,o,28)^K.rotrBL(n,o,34)^K.rotrBL(n,o,39),P=n&i^n&a^i&a,E=o&s^o&c^s&c;v=y|0,T=d|0,y=S|0,d=k|0,S=l|0,k=h|0,{h:l,l:h}=K.add(f|0,u|0,b|0,O|0),f=a|0,u=c|0,a=i|0,c=s|0,i=n|0,s=o|0;let A=K.add3L(O,I,E);n=K.add3H(A,b,_,P),o=A|0}({h:n,l:o}=K.add(this.Ah|0,this.Al|0,n|0,o|0)),{h:i,l:s}=K.add(this.Bh|0,this.Bl|0,i|0,s|0),{h:a,l:c}=K.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:u}=K.add(this.Dh|0,this.Dl|0,f|0,u|0),{h:l,l:h}=K.add(this.Eh|0,this.El|0,l|0,h|0),{h:S,l:k}=K.add(this.Fh|0,this.Fl|0,S|0,k|0),{h:y,l:d}=K.add(this.Gh|0,this.Gl|0,y|0,d|0),{h:v,l:T}=K.add(this.Hh|0,this.Hl|0,v|0,T|0),this.set(n,o,i,s,a,c,f,u,l,h,S,k,y,d,v,T)}roundClean(){xt.fill(0),wt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Ds=on(()=>new zo);var un={};xe(un,{aInRange:()=>Se,abool:()=>Me,abytes:()=>er,bitGet:()=>Nf,bitLen:()=>Jo,bitMask:()=>Cr,bitSet:()=>If,bytesToHex:()=>rt,bytesToNumberBE:()=>nt,bytesToNumberLE:()=>vt,concatBytes:()=>ot,createHmacDrbg:()=>Yo,ensureBytes:()=>re,equalBytes:()=>Cf,hexToBytes:()=>Lt,hexToNumber:()=>Wo,inRange:()=>kr,isBytes:()=>bt,memoized:()=>Ht,notImplemented:()=>_f,numberToBytesBE:()=>Bt,numberToBytesLE:()=>Ft,numberToHexUnpadded:()=>Vt,numberToVarBytesBE:()=>kf,utf8ToBytes:()=>Tf,validateObject:()=>je});var Zo=BigInt(0),cn=BigInt(1),Af=BigInt(2);function bt(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function er(r){if(!bt(r))throw new Error("Uint8Array expected")}function Me(r,e){if(typeof e!="boolean")throw new Error(`${r} must be valid boolean, got "${e}".`)}var Sf=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function rt(r){er(r);let e="";for(let t=0;t<r.length;t++)e+=Sf[r[t]];return e}function Vt(r){let e=r.toString(16);return e.length&1?`0${e}`:e}function Wo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}var tt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ms(r){if(r>=tt._0&&r<=tt._9)return r-tt._0;if(r>=tt._A&&r<=tt._F)return r-(tt._A-10);if(r>=tt._a&&r<=tt._f)return r-(tt._a-10)}function Lt(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let e=r.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(t);for(let o=0,i=0;o<t;o++,i+=2){let s=Ms(r.charCodeAt(i)),a=Ms(r.charCodeAt(i+1));if(s===void 0||a===void 0){let c=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[o]=s*16+a}return n}function nt(r){return Wo(rt(r))}function vt(r){return er(r),Wo(rt(Uint8Array.from(r).reverse()))}function Bt(r,e){return Lt(r.toString(16).padStart(e*2,"0"))}function Ft(r,e){return Bt(r,e).reverse()}function kf(r){return Lt(Vt(r))}function re(r,e,t){let n;if(typeof e=="string")try{n=Lt(e)}catch(i){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${i}`)}else if(bt(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);let o=n.length;if(typeof t=="number"&&o!==t)throw new Error(`${r} expected ${t} bytes, got ${o}`);return n}function ot(...r){let e=0;for(let n=0;n<r.length;n++){let o=r[n];er(o),e+=o.length}let t=new Uint8Array(e);for(let n=0,o=0;n<r.length;n++){let i=r[n];t.set(i,o),o+=i.length}return t}function Cf(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function Tf(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}var Go=r=>typeof r=="bigint"&&Zo<=r;function kr(r,e,t){return Go(r)&&Go(e)&&Go(t)&&e<=r&&r<t}function Se(r,e,t,n){if(!kr(e,t,n))throw new Error(`expected valid ${r}: ${t} <= n < ${n}, got ${typeof e} ${e}`)}function Jo(r){let e;for(e=0;r>Zo;r>>=cn,e+=1);return e}function Nf(r,e){return r>>BigInt(e)&cn}function If(r,e,t){return r|(t?cn:Zo)<<BigInt(e)}var Cr=r=>(Af<<BigInt(r-1))-cn,jo=r=>new Uint8Array(r),$s=r=>Uint8Array.from(r);function Yo(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=jo(r),o=jo(r),i=0,s=()=>{n.fill(1),o.fill(0),i=0},a=(...l)=>t(o,n,...l),c=(l=jo())=>{o=a($s([0]),l),n=a(),l.length!==0&&(o=a($s([1]),l),n=a())},f=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,h=[];for(;l<e;){n=a();let S=n.slice();h.push(S),l+=n.length}return ot(...h)};return(l,h)=>{s(),c(l);let S;for(;!(S=h(f()));)c();return s(),S}}var Uf={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||bt(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function je(r,e,t={}){let n=(o,i,s)=>{let a=Uf[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=r[o];if(!(s&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${i}`)};for(let[o,i]of Object.entries(e))n(o,i,!1);for(let[o,i]of Object.entries(t))n(o,i,!0);return r}var _f=()=>{throw new Error("not implemented")};function Ht(r){let e=new WeakMap;return(t,...n)=>{let o=e.get(t);if(o!==void 0)return o;let i=r(t,...n);return e.set(t,i),i}}var oe=BigInt(0),Q=BigInt(1),Ot=BigInt(2),Rf=BigInt(3),Xo=BigInt(4),Ps=BigInt(5),Ks=BigInt(8),Vf=BigInt(9),Lf=BigInt(16);function J(r,e){let t=r%e;return t>=oe?t:e+t}function Ff(r,e,t){if(t<=oe||e<oe)throw new Error("Expected power/modulo > 0");if(t===Q)return oe;let n=Q;for(;e>oe;)e&Q&&(n=n*r%t),r=r*r%t,e>>=Q;return n}function ee(r,e,t){let n=r;for(;e-- >oe;)n*=n,n%=t;return n}function ln(r,e){if(r===oe||e<=oe)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=J(r,e),n=e,o=oe,i=Q,s=Q,a=oe;for(;t!==oe;){let f=n/t,u=n%t,l=o-s*f,h=i-a*f;n=t,t=u,o=s,i=a,s=l,a=h}if(n!==Q)throw new Error("invert: does not exist");return J(o,e)}function Hf(r){let e=(r-Q)/Ot,t,n,o;for(t=r-Q,n=0;t%Ot===oe;t/=Ot,n++);for(o=Ot;o<r&&Ff(o,e,r)!==r-Q;o++);if(n===1){let s=(r+Q)/Xo;return function(c,f){let u=c.pow(f,s);if(!c.eql(c.sqr(u),f))throw new Error("Cannot find square root");return u}}let i=(t+Q)/Ot;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n,u=a.pow(a.mul(a.ONE,o),t),l=a.pow(c,i),h=a.pow(c,t);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let S=1;for(let y=a.sqr(h);S<f&&!a.eql(y,a.ONE);S++)y=a.sqr(y);let k=a.pow(u,Q<<BigInt(f-S-1));u=a.sqr(k),l=a.mul(l,k),h=a.mul(h,u),f=S}return l}}function Of(r){if(r%Xo===Rf){let e=(r+Q)/Xo;return function(n,o){let i=n.pow(o,e);if(!n.eql(n.sqr(i),o))throw new Error("Cannot find square root");return i}}if(r%Ks===Ps){let e=(r-Ps)/Ks;return function(n,o){let i=n.mul(o,Ot),s=n.pow(i,e),a=n.mul(o,s),c=n.mul(n.mul(a,Ot),s),f=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(f),o))throw new Error("Cannot find square root");return f}}return r%Lf,Hf(r)}var qs=(r,e)=>(J(r,e)&Q)===Q,Df=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Qo(r){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Df.reduce((n,o)=>(n[o]="function",n),e);return je(r,t)}function Mf(r,e,t){if(t<oe)throw new Error("Expected power > 0");if(t===oe)return r.ONE;if(t===Q)return e;let n=r.ONE,o=e;for(;t>oe;)t&Q&&(n=r.mul(n,o)),o=r.sqr(o),t>>=Q;return n}function $f(r,e){let t=new Array(e.length),n=e.reduce((i,s,a)=>r.is0(s)?i:(t[a]=i,r.mul(i,s)),r.ONE),o=r.inv(n);return e.reduceRight((i,s,a)=>r.is0(s)?i:(t[a]=r.mul(i,t[a]),r.mul(i,s)),o),t}function ei(r,e){let t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Et(r,e,t=!1,n={}){if(r<=oe)throw new Error(`Expected Field ORDER > 0, got ${r}`);let{nBitLength:o,nByteLength:i}=ei(r,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=Of(r),a=Object.freeze({ORDER:r,BITS:o,BYTES:i,MASK:Cr(o),ZERO:oe,ONE:Q,create:c=>J(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return oe<=c&&c<r},is0:c=>c===oe,isOdd:c=>(c&Q)===Q,neg:c=>J(-c,r),eql:(c,f)=>c===f,sqr:c=>J(c*c,r),add:(c,f)=>J(c+f,r),sub:(c,f)=>J(c-f,r),mul:(c,f)=>J(c*f,r),pow:(c,f)=>Mf(a,c,f),div:(c,f)=>J(c*ln(f,r),r),sqrN:c=>c*c,addN:(c,f)=>c+f,subN:(c,f)=>c-f,mulN:(c,f)=>c*f,inv:c=>ln(c,r),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>$f(a,c),cmov:(c,f,u)=>u?f:c,toBytes:c=>t?Ft(c,i):Bt(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return t?vt(c):nt(c)}});return Object.freeze(a)}function zs(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let e=r.toString(2).length;return Math.ceil(e/8)}function ti(r){let e=zs(r);return e+Math.ceil(e/2)}function Gs(r,e,t=!1){let n=r.length,o=zs(e),i=ti(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let s=t?nt(r):vt(r),a=J(s,e-Q)+Q;return t?Ft(a,o):Bt(a,o)}var Kf=BigInt(0),ri=BigInt(1),ni=new WeakMap,js=new WeakMap;function fn(r,e){let t=(i,s)=>{let a=s.negate();return i?a:s},n=i=>{if(!Number.isSafeInteger(i)||i<=0||i>e)throw new Error(`Wrong window size=${i}, should be [1..${e}]`)},o=i=>{n(i);let s=Math.ceil(e/i)+1,a=2**(i-1);return{windows:s,windowSize:a}};return{constTimeNegate:t,unsafeLadder(i,s){let a=r.ZERO,c=i;for(;s>Kf;)s&ri&&(a=a.add(c)),c=c.double(),s>>=ri;return a},precomputeWindow(i,s){let{windows:a,windowSize:c}=o(s),f=[],u=i,l=u;for(let h=0;h<a;h++){l=u,f.push(l);for(let S=1;S<c;S++)l=l.add(u),f.push(l);u=l.double()}return f},wNAF(i,s,a){let{windows:c,windowSize:f}=o(i),u=r.ZERO,l=r.BASE,h=BigInt(2**i-1),S=2**i,k=BigInt(i);for(let y=0;y<c;y++){let d=y*f,v=Number(a&h);a>>=k,v>f&&(v-=S,a+=ri);let T=d,w=d+Math.abs(v)-1,N=y%2!==0,H=v<0;v===0?l=l.add(t(N,s[T])):u=u.add(t(H,s[w]))}return{p:u,f:l}},wNAFCached(i,s,a){let c=js.get(i)||1,f=ni.get(i);return f||(f=this.precomputeWindow(i,c),c!==1&&ni.set(i,a(f))),this.wNAF(c,f,s)},setWindowSize(i,s){n(s),js.set(i,s),ni.delete(i)}}}function hn(r,e,t,n){if(!Array.isArray(t)||!Array.isArray(n)||n.length!==t.length)throw new Error("arrays of points and scalars must have equal length");n.forEach((u,l)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${l}`)}),t.forEach((u,l)=>{if(!(u instanceof r))throw new Error(`wrong point at index ${l}`)});let o=Jo(BigInt(t.length)),i=o>12?o-3:o>4?o-2:o?2:1,s=(1<<i)-1,a=new Array(s+1).fill(r.ZERO),c=Math.floor((e.BITS-1)/i)*i,f=r.ZERO;for(let u=c;u>=0;u-=i){a.fill(r.ZERO);for(let h=0;h<n.length;h++){let S=n[h],k=Number(S>>BigInt(u)&BigInt(s));a[k]=a[k].add(t[h])}let l=r.ZERO;for(let h=a.length-1,S=r.ZERO;h>0;h--)S=S.add(a[h]),l=l.add(S);if(f=f.add(l),u!==0)for(let h=0;h<i;h++)f=f.double()}return f}function Tr(r){return Qo(r.Fp),je(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ei(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}var $e=BigInt(0),ke=BigInt(1),dn=BigInt(2),qf=BigInt(8),zf={zip215:!0};function Gf(r){let e=Tr(r);return je(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Zs(r){let e=Gf(r),{Fp:t,n,prehash:o,hash:i,randomBytes:s,nByteLength:a,h:c}=e,f=dn<<BigInt(a*8)-ke,u=t.create,l=Et(e.n,e.nBitLength),h=e.uvRatio||((m,p)=>{try{return{isValid:!0,value:t.sqrt(m*t.inv(p))}}catch{return{isValid:!1,value:$e}}}),S=e.adjustScalarBytes||(m=>m),k=e.domain||((m,p,B)=>{if(Me("phflag",B),p.length||B)throw new Error("Contexts/pre-hash are not supported");return m});function y(m,p){Se("coordinate "+m,p,$e,f)}function d(m){if(!(m instanceof w))throw new Error("ExtendedPoint expected")}let v=Ht((m,p)=>{let{ex:B,ey:F,ez:D}=m,M=m.is0();p==null&&(p=M?qf:t.inv(D));let q=u(B*p),j=u(F*p),z=u(D*p);if(M)return{x:$e,y:ke};if(z!==ke)throw new Error("invZ was invalid");return{x:q,y:j}}),T=Ht(m=>{let{a:p,d:B}=e;if(m.is0())throw new Error("bad point: ZERO");let{ex:F,ey:D,ez:M,et:q}=m,j=u(F*F),z=u(D*D),W=u(M*M),Y=u(W*W),ie=u(j*p),se=u(W*u(ie+z)),le=u(Y+u(B*u(j*z)));if(se!==le)throw new Error("bad point: equation left != right (1)");let ye=u(F*D),ne=u(M*q);if(ye!==ne)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(p,B,F,D){this.ex=p,this.ey=B,this.ez=F,this.et=D,y("x",p),y("y",B),y("z",F),y("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(p){if(p instanceof w)throw new Error("extended point not allowed");let{x:B,y:F}=p||{};return y("x",B),y("y",F),new w(B,F,ke,u(B*F))}static normalizeZ(p){let B=t.invertBatch(p.map(F=>F.ez));return p.map((F,D)=>F.toAffine(B[D])).map(w.fromAffine)}static msm(p,B){return hn(w,l,p,B)}_setWindowSize(p){L.setWindowSize(this,p)}assertValidity(){T(this)}equals(p){d(p);let{ex:B,ey:F,ez:D}=this,{ex:M,ey:q,ez:j}=p,z=u(B*j),W=u(M*D),Y=u(F*j),ie=u(q*D);return z===W&&Y===ie}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:p}=e,{ex:B,ey:F,ez:D}=this,M=u(B*B),q=u(F*F),j=u(dn*u(D*D)),z=u(p*M),W=B+F,Y=u(u(W*W)-M-q),ie=z+q,se=ie-j,le=z-q,ye=u(Y*se),ne=u(ie*le),Ee=u(Y*le),Qe=u(se*ie);return new w(ye,ne,Qe,Ee)}add(p){d(p);let{a:B,d:F}=e,{ex:D,ey:M,ez:q,et:j}=this,{ex:z,ey:W,ez:Y,et:ie}=p;if(B===BigInt(-1)){let as=u((M-D)*(W+z)),cs=u((M+D)*(W-z)),Ro=u(cs-as);if(Ro===$e)return this.double();let us=u(q*dn*ie),ls=u(j*dn*Y),fs=ls+us,hs=cs+as,ds=ls-us,rl=u(fs*Ro),nl=u(hs*ds),ol=u(fs*ds),il=u(Ro*hs);return new w(rl,nl,il,ol)}let se=u(D*z),le=u(M*W),ye=u(j*F*ie),ne=u(q*Y),Ee=u((D+M)*(z+W)-se-le),Qe=ne-ye,wr=ne+ye,br=u(le-B*se),Xu=u(Ee*Qe),Qu=u(wr*br),el=u(Ee*br),tl=u(Qe*wr);return new w(Xu,Qu,tl,el)}subtract(p){return this.add(p.negate())}wNAF(p){return L.wNAFCached(this,p,w.normalizeZ)}multiply(p){let B=p;Se("scalar",B,ke,n);let{p:F,f:D}=this.wNAF(B);return w.normalizeZ([F,D])[0]}multiplyUnsafe(p){let B=p;return Se("scalar",B,$e,n),B===$e?H:this.equals(H)||B===ke?this:this.equals(N)?this.wNAF(B).p:L.unsafeLadder(this,B)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return L.unsafeLadder(this,n).is0()}toAffine(p){return v(this,p)}clearCofactor(){let{h:p}=e;return p===ke?this:this.multiplyUnsafe(p)}static fromHex(p,B=!1){let{d:F,a:D}=e,M=t.BYTES;p=re("pointHex",p,M),Me("zip215",B);let q=p.slice(),j=p[M-1];q[M-1]=j&-129;let z=vt(q),W=B?f:t.ORDER;Se("pointHex.y",z,$e,W);let Y=u(z*z),ie=u(Y-ke),se=u(F*Y-D),{isValid:le,value:ye}=h(ie,se);if(!le)throw new Error("Point.fromHex: invalid y coordinate");let ne=(ye&ke)===ke,Ee=(j&128)!==0;if(!B&&ye===$e&&Ee)throw new Error("Point.fromHex: x=0 and x_0=1");return Ee!==ne&&(ye=u(-ye)),w.fromAffine({x:ye,y:z})}static fromPrivateKey(p){return b(p).point}toRawBytes(){let{x:p,y:B}=this.toAffine(),F=Ft(B,t.BYTES);return F[F.length-1]|=p&ke?128:0,F}toHex(){return rt(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,ke,u(e.Gx*e.Gy)),w.ZERO=new w($e,ke,ke,$e);let{BASE:N,ZERO:H}=w,L=fn(w,a*8);function U(m){return J(m,n)}function x(m){return U(vt(m))}function b(m){let p=a;m=re("private key",m,p);let B=re("hashed private key",i(m),2*p),F=S(B.slice(0,p)),D=B.slice(p,2*p),M=x(F),q=N.multiply(M),j=q.toRawBytes();return{head:F,prefix:D,scalar:M,point:q,pointBytes:j}}function O(m){return b(m).pointBytes}function _(m=new Uint8Array,...p){let B=ot(...p);return x(i(k(B,re("context",m),!!o)))}function I(m,p,B={}){m=re("message",m),o&&(m=o(m));let{prefix:F,scalar:D,pointBytes:M}=b(p),q=_(B.context,F,m),j=N.multiply(q).toRawBytes(),z=_(B.context,j,M,m),W=U(q+z*D);Se("signature.s",W,$e,n);let Y=ot(j,Ft(W,t.BYTES));return re("result",Y,a*2)}let P=zf;function E(m,p,B,F=P){let{context:D,zip215:M}=F,q=t.BYTES;m=re("signature",m,2*q),p=re("message",p),M!==void 0&&Me("zip215",M),o&&(p=o(p));let j=vt(m.slice(q,2*q)),z,W,Y;try{z=w.fromHex(B,M),W=w.fromHex(m.slice(0,q),M),Y=N.multiplyUnsafe(j)}catch{return!1}if(!M&&z.isSmallOrder())return!1;let ie=_(D,W.toRawBytes(),z.toRawBytes(),p);return W.add(z.multiplyUnsafe(ie)).subtract(Y).clearCofactor().equals(w.ZERO)}return N._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:I,verify:E,ExtendedPoint:w,utils:{getExtendedPublicKey:b,randomPrivateKey:()=>s(t.BYTES),precompute(m=8,p=w.BASE){return p._setWindowSize(m),p.multiply(BigInt(3)),p}}}}var oi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ws=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),rp=BigInt(0),jf=BigInt(1),Js=BigInt(2),np=BigInt(3),Zf=BigInt(5),Wf=BigInt(8);function Jf(r){let e=BigInt(10),t=BigInt(20),n=BigInt(40),o=BigInt(80),i=oi,a=r*r%i*r%i,c=ee(a,Js,i)*a%i,f=ee(c,jf,i)*r%i,u=ee(f,Zf,i)*f%i,l=ee(u,e,i)*u%i,h=ee(l,t,i)*l%i,S=ee(h,n,i)*h%i,k=ee(S,o,i)*S%i,y=ee(k,o,i)*S%i,d=ee(y,e,i)*u%i;return{pow_p_5_8:ee(d,Js,i)*r%i,b2:a}}function Yf(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function Xf(r,e){let t=oi,n=J(e*e*e,t),o=J(n*n*e,t),i=Jf(r*o).pow_p_5_8,s=J(r*n*i,t),a=J(e*s*s,t),c=s,f=J(s*Ws,t),u=a===r,l=a===J(-r,t),h=a===J(-r*Ws,t);return u&&(s=c),(l||h)&&(s=f),qs(s,t)&&(s=J(-s,t)),{isValid:u||l,value:s}}var Qf=Et(oi,void 0,!0),eh={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Qf,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Wf,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Ds,randomBytes:sn,adjustScalarBytes:Yf,uvRatio:Xf},Ys=Zs(eh);var pn=32;function Xs(r,e,t){return Ys.verify(e,t instanceof Uint8Array?t:t.subarray(),r)}var gn=class{type="Ed25519";raw;constructor(e){this.raw=ii(e,pn)}toMultihash(){return Ar.digest(tr(this))}toCID(){return we.createV1(114,this.toMultihash())}toString(){return ae.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Ge(this.raw,e.raw)}verify(e,t){return Xs(this.raw,t,e)}};function ea(r){return r=ii(r,pn),new gn(r)}function ii(r,e){if(r=Uint8Array.from(r??[]),r.length!==e)throw new Ae(`Key must be a Uint8Array of length ${e}, got ${r.length}`);return r}function Ze(r=0){return new Uint8Array(r)}var rh=Math.pow(2,7),nh=Math.pow(2,14),oh=Math.pow(2,21),ta=Math.pow(2,28),ra=Math.pow(2,35),na=Math.pow(2,42),oa=Math.pow(2,49),be=128,At=127;function Nr(r){if(r<rh)return 1;if(r<nh)return 2;if(r<oh)return 3;if(r<ta)return 4;if(r<ra)return 5;if(r<na)return 6;if(r<oa)return 7;if(Number.MAX_SAFE_INTEGER!=null&&r>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function ia(r,e,t=0){switch(Nr(r)){case 8:e[t++]=r&255|be,r/=128;case 7:e[t++]=r&255|be,r/=128;case 6:e[t++]=r&255|be,r/=128;case 5:e[t++]=r&255|be,r/=128;case 4:e[t++]=r&255|be,r>>>=7;case 3:e[t++]=r&255|be,r>>>=7;case 2:e[t++]=r&255|be,r>>>=7;case 1:{e[t++]=r&255,r>>>=7;break}default:throw new Error("unreachable")}return e}function sa(r,e){let t=r[e],n=0;if(n+=t&At,t<be||(t=r[e+1],n+=(t&At)<<7,t<be)||(t=r[e+2],n+=(t&At)<<14,t<be)||(t=r[e+3],n+=(t&At)<<21,t<be)||(t=r[e+4],n+=(t&At)*ta,t<be)||(t=r[e+5],n+=(t&At)*ra,t<be)||(t=r[e+6],n+=(t&At)*na,t<be)||(t=r[e+7],n+=(t&At)*oa,t<be))return n;throw new RangeError("Could not decode varint")}var si=new Float32Array([-0]),St=new Uint8Array(si.buffer);function aa(r,e,t){si[0]=r,e[t]=St[0],e[t+1]=St[1],e[t+2]=St[2],e[t+3]=St[3]}function ca(r,e){return St[0]=r[e],St[1]=r[e+1],St[2]=r[e+2],St[3]=r[e+3],si[0]}var ai=new Float64Array([-0]),ge=new Uint8Array(ai.buffer);function ua(r,e,t){ai[0]=r,e[t]=ge[0],e[t+1]=ge[1],e[t+2]=ge[2],e[t+3]=ge[3],e[t+4]=ge[4],e[t+5]=ge[5],e[t+6]=ge[6],e[t+7]=ge[7]}function la(r,e){return ge[0]=r[e],ge[1]=r[e+1],ge[2]=r[e+2],ge[3]=r[e+3],ge[4]=r[e+4],ge[5]=r[e+5],ge[6]=r[e+6],ge[7]=r[e+7],ai[0]}var ih=BigInt(Number.MAX_SAFE_INTEGER),sh=BigInt(Number.MIN_SAFE_INTEGER),Te=class r{lo;hi;constructor(e,t){this.lo=e|0,this.hi=t|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){let t=~this.lo+1>>>0,n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let t=~this.lo+1>>>0,n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){let e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){let e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){let e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return Dt;if(e<ih&&e>sh)return this.fromNumber(Number(e));let t=e<0n;t&&(e=-e);let n=e>>32n,o=e-(n<<32n);return t&&(n=~n|0n,o=~o|0n,++o>fa&&(o=0n,++n>fa&&(n=0n))),new r(Number(o),Number(n))}static fromNumber(e){if(e===0)return Dt;let t=e<0;t&&(e=-e);let n=e>>>0,o=(e-n)/4294967296>>>0;return t&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new r(n,o)}static from(e){return typeof e=="number"?r.fromNumber(e):typeof e=="bigint"?r.fromBigInt(e):typeof e=="string"?r.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new r(e.low>>>0,e.high>>>0):Dt}},Dt=new Te(0,0);Dt.toBigInt=function(){return 0n};Dt.zzEncode=Dt.zzDecode=function(){return this};Dt.length=function(){return 1};var fa=4294967296n;function ha(r){let e=0,t=0;for(let n=0;n<r.length;++n)t=r.charCodeAt(n),t<128?e+=1:t<2048?e+=2:(t&64512)===55296&&(r.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function da(r,e,t){if(t-e<1)return"";let o,i=[],s=0,a;for(;e<t;)a=r[e++],a<128?i[s++]=a:a>191&&a<224?i[s++]=(a&31)<<6|r[e++]&63:a>239&&a<365?(a=((a&7)<<18|(r[e++]&63)<<12|(r[e++]&63)<<6|r[e++]&63)-65536,i[s++]=55296+(a>>10),i[s++]=56320+(a&1023)):i[s++]=(a&15)<<12|(r[e++]&63)<<6|r[e++]&63,s>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o!=null?(s>0&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))}function ci(r,e,t){let n=t,o,i;for(let s=0;s<r.length;++s)o=r.charCodeAt(s),o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&((i=r.charCodeAt(s+1))&64512)===56320?(o=65536+((o&1023)<<10)+(i&1023),++s,e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128);return t-n}function Pe(r,e){return RangeError(`index out of range: ${r.pos} + ${e??1} > ${r.len}`)}function mn(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}var ui=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Pe(this,10);return e}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Pe(this,4);return mn(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Pe(this,4);return mn(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Pe(this,4);let e=ca(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw Pe(this,4);let e=la(this.buf,this.pos);return this.pos+=8,e}bytes(){let e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Pe(this,e);return this.pos+=e,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){let e=this.bytes();return da(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Pe(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Pe(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){let e=new Te(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Pe(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Pe(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Pe(this,8);let e=mn(this.buf,this.pos+=4),t=mn(this.buf,this.pos+=4);return new Te(e,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let e=sa(this.buf,this.pos);return this.pos+=Nr(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function li(r){return new ui(r instanceof Uint8Array?r:r.subarray())}function rr(r,e,t){let n=li(r);return e.decode(n,void 0,t)}var fi={};xe(fi,{base10:()=>ah});var ah=mt({prefix:"9",name:"base10",alphabet:"0123456789"});var hi={};xe(hi,{base16:()=>ch,base16upper:()=>uh});var ch=te({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),uh=te({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var di={};xe(di,{base2:()=>lh});var lh=te({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var pi={};xe(pi,{base256emoji:()=>gh});var ga=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),fh=ga.reduce((r,e,t)=>(r[t]=e,r),[]),hh=ga.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function dh(r){return r.reduce((e,t)=>(e+=fh[t],e),"")}function ph(r){let e=[];for(let t of r){let n=hh[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var gh=zt({prefix:"\u{1F680}",name:"base256emoji",encode:dh,decode:ph});var gi={};xe(gi,{base36:()=>yn,base36upper:()=>mh});var yn=mt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mh=mt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var yi={};xe(yi,{base64:()=>mi,base64pad:()=>yh,base64url:()=>xh,base64urlpad:()=>wh});var mi=te({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yh=te({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xh=te({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wh=te({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var xi={};xe(xi,{base8:()=>bh});var bh=te({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var wi={};xe(wi,{identity:()=>vh});var vh=zt({prefix:"\0",name:"identity",encode:r=>ws(r),decode:r=>xs(r)});var $p=new TextEncoder,Pp=new TextDecoder;var Ei={};xe(Ei,{sha256:()=>Bi,sha512:()=>Ah});function vi({name:r,code:e,encode:t}){return new bi(r,e,t)}var bi=class{name;code;encode;constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Oe(this.code,t):t.then(n=>Oe(this.code,n))}else throw Error("Unknown type, must be binary type")}};function ya(r){return async e=>new Uint8Array(await crypto.subtle.digest(r,e))}var Bi=vi({name:"sha2-256",code:18,encode:ya("SHA-256")}),Ah=vi({name:"sha2-512",code:19,encode:ya("SHA-512")});var Ai={...wi,...di,...xi,...fi,...hi,...Do,...gi,...Oo,...yi,...pi},eg={...Ei,...Po};function wa(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var xa=wa("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Si=wa("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Ze(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Sh={utf8:xa,"utf-8":xa,hex:Ai.base16,latin1:Si,ascii:Si,binary:Si,...Ai},xn=Sh;function X(r,e="utf8"){let t=xn[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}function ki(r){let e=r??8192,t=e>>>1,n,o=e;return function(s){if(s<1||s>t)return Ze(s);o+s>e&&(n=Ze(e),o=0);let a=n.subarray(o,o+=s);return o&7&&(o=(o|7)+1),a}}var Mt=class{fn;len;next;val;constructor(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}};function Ci(){}var Ni=class{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}},kh=ki();function Ch(r){return globalThis.Buffer!=null?Ze(r):kh(r)}var Ur=class{len;head;tail;states;constructor(){this.len=0,this.head=new Mt(Ci,0,0),this.tail=this.head,this.states=null}_push(e,t,n){return this.tail=this.tail.next=new Mt(e,t,n),this.len+=t,this}uint32(e){return this.len+=(this.tail=this.tail.next=new Ii((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(wn,10,Te.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){let t=Te.fromBigInt(e);return this._push(wn,t.length(),t)}uint64Number(e){return this._push(ia,Nr(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){let t=Te.fromBigInt(e).zzEncode();return this._push(wn,t.length(),t)}sint64Number(e){let t=Te.fromNumber(e).zzEncode();return this._push(wn,t.length(),t)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(Ti,1,e?1:0)}fixed32(e){return this._push(Ir,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){let t=Te.fromBigInt(e);return this._push(Ir,4,t.lo)._push(Ir,4,t.hi)}fixed64Number(e){let t=Te.fromNumber(e);return this._push(Ir,4,t.lo)._push(Ir,4,t.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(aa,4,e)}double(e){return this._push(ua,8,e)}bytes(e){let t=e.length>>>0;return t===0?this._push(Ti,1,0):this.uint32(t)._push(Nh,t,e)}string(e){let t=ha(e);return t!==0?this.uint32(t)._push(ci,t,e):this._push(Ti,1,0)}fork(){return this.states=new Ni(this),this.head=this.tail=new Mt(Ci,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Mt(Ci,0,0),this.len=0),this}ldelim(){let e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=t,this.len+=n),this}finish(){let e=this.head.next,t=Ch(this.len),n=0;for(;e!=null;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t}};function Ti(r,e,t){e[t]=r&255}function Th(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}var Ii=class extends Mt{next;constructor(e,t){super(Th,e,t),this.next=void 0}};function wn(r,e,t){for(;r.hi!==0;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}function Ir(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function Nh(r,e,t){e.set(r,t)}globalThis.Buffer!=null&&(Ur.prototype.bytes=function(r){let e=r.length>>>0;return this.uint32(e),e>0&&this._push(Ih,e,r),this},Ur.prototype.string=function(r){let e=globalThis.Buffer.byteLength(r);return this.uint32(e),e>0&&this._push(Uh,e,r),this});function Ih(r,e,t){e.set(r,t)}function Uh(r,e,t){r.length<40?ci(r,e,t):e.utf8Write!=null?e.utf8Write(r,t):e.set(X(r),t)}function Ui(){return new Ur}function nr(r,e){let t=Ui();return e.encode(r,t,{lengthDelimited:!1}),t.finish()}var or;(function(r){r[r.VARINT=0]="VARINT",r[r.BIT64=1]="BIT64",r[r.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",r[r.START_GROUP=3]="START_GROUP",r[r.END_GROUP=4]="END_GROUP",r[r.BIT32=5]="BIT32"})(or||(or={}));function bn(r,e,t,n){return{name:r,type:e,encode:t,decode:n}}function _r(r){function e(o){if(r[o.toString()]==null)throw new Error("Invalid enum value");return r[o]}let t=function(i,s){let a=e(i);s.int32(a)},n=function(i){let s=i.int32();return e(s)};return bn("enum",or.VARINT,t,n)}function ir(r,e){return bn("message",or.LENGTH_DELIMITED,r,e)}var fe;(function(r){r.RSA="RSA",r.Ed25519="Ed25519",r.secp256k1="secp256k1"})(fe||(fe={}));var _i;(function(r){r[r.RSA=0]="RSA",r[r.Ed25519=1]="Ed25519",r[r.secp256k1=2]="secp256k1"})(_i||(_i={}));(function(r){r.codec=()=>_r(_i)})(fe||(fe={}));var it;(function(r){let e;r.codec=()=>(e==null&&(e=ir((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),fe.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{let i={},s=n==null?t.len:t.pos+n;for(;t.pos<s;){let a=t.uint32();switch(a>>>3){case 1:{i.Type=fe.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(a&7);break}}}return i})),e),r.encode=t=>nr(t,r.codec()),r.decode=(t,n)=>rr(t,r.codec(),n)})(it||(it={}));var Ri;(function(r){let e;r.codec=()=>(e==null&&(e=ir((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),fe.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{let i={},s=n==null?t.len:t.pos+n;for(;t.pos<s;){let a=t.uint32();switch(a>>>3){case 1:{i.Type=fe.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(a&7);break}}}return i})),e),r.encode=t=>nr(t,r.codec()),r.decode=(t,n)=>rr(t,r.codec(),n)})(Ri||(Ri={}));var Pr={};xe(Pr,{MAX_RSA_KEY_SIZE:()=>fo,generateRSAKeyPair:()=>mc,jwkToJWKKeyPair:()=>yc,jwkToPkcs1:()=>jh,jwkToPkix:()=>Pi,jwkToRSAPrivateKey:()=>gc,pkcs1ToJwk:()=>hc,pkcs1ToRSAPrivateKey:()=>pc,pkixToJwk:()=>dc,pkixToRSAPublicKey:()=>Ki});var _h=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ct=new Uint32Array(64),Vi=class extends Qt{constructor(){super(64,32,8,!1),this.A=kt[0]|0,this.B=kt[1]|0,this.C=kt[2]|0,this.D=kt[3]|0,this.E=kt[4]|0,this.F=kt[5]|0,this.G=kt[6]|0,this.H=kt[7]|0}get(){let{A:e,B:t,C:n,D:o,E:i,F:s,G:a,H:c}=this;return[e,t,n,o,i,s,a,c]}set(e,t,n,o,i,s,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,t){for(let l=0;l<16;l++,t+=4)Ct[l]=e.getUint32(t,!1);for(let l=16;l<64;l++){let h=Ct[l-15],S=Ct[l-2],k=De(h,7)^De(h,18)^h>>>3,y=De(S,17)^De(S,19)^S>>>10;Ct[l]=y+Ct[l-7]+k+Ct[l-16]|0}let{A:n,B:o,C:i,D:s,E:a,F:c,G:f,H:u}=this;for(let l=0;l<64;l++){let h=De(a,6)^De(a,11)^De(a,25),S=u+h+Fs(a,c,f)+_h[l]+Ct[l]|0,y=(De(n,2)^De(n,13)^De(n,22))+Hs(n,o,i)|0;u=f,f=c,c=a,a=s+S|0,s=i,i=o,o=n,n=S+y|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,o,i,s,a,c,f,u)}roundClean(){Ct.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var sr=on(()=>new Vi);var G=ms(va());function $t(r,e){let t=0;if(r.length===1)return r[0];for(let n=r.length-1;n>=0;n--)t+=r[r.length-1-n]*Math.pow(2,e*n);return t}function Tt(r,e,t=-1){let n=t,o=r,i=0,s=Math.pow(2,e);for(let a=1;a<8;a++){if(r<s){let c;if(n<0)c=new ArrayBuffer(a),i=a;else{if(n<a)return new ArrayBuffer(0);c=new ArrayBuffer(n),i=n}let f=new Uint8Array(c);for(let u=a-1;u>=0;u--){let l=Math.pow(2,u*e);f[i-u-1]=Math.floor(o/l),o-=f[i-u-1]*l}return c}s*=Math.pow(2,e)}return new ArrayBuffer(0)}function En(...r){let e=0,t=0;for(let i of r)e+=i.length;let n=new ArrayBuffer(e),o=new Uint8Array(n);for(let i of r)o.set(i,t),t+=i.length;return o}function Fi(){let r=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let a=r[0]===255&&r[1]&128,c=r[0]===0&&(r[1]&128)===0;(a||c)&&this.warnings.push("Needlessly long format")}let e=new ArrayBuffer(this.valueHex.byteLength),t=new Uint8Array(e);for(let a=0;a<this.valueHex.byteLength;a++)t[a]=0;t[0]=r[0]&128;let n=$t(t,8),o=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(o);for(let a=0;a<this.valueHex.byteLength;a++)i[a]=r[a];return i[0]&=127,$t(i,8)-n}function Ba(r){let e=r<0?r*-1:r,t=128;for(let n=1;n<8;n++){if(e<=t){if(r<0){let s=t-e,a=Tt(s,8,n),c=new Uint8Array(a);return c[0]|=128,a}let o=Tt(e,8,n),i=new Uint8Array(o);if(i[0]&128){let s=o.slice(0),a=new Uint8Array(s);o=new ArrayBuffer(o.byteLength+1),i=new Uint8Array(o);for(let c=0;c<s.byteLength;c++)i[c+1]=a[c];i[0]=0}return o}t*=Math.pow(2,8)}return new ArrayBuffer(0)}function Ea(r,e){if(r.byteLength!==e.byteLength)return!1;let t=new Uint8Array(r),n=new Uint8Array(e);for(let o=0;o<t.length;o++)if(t[o]!==n[o])return!1;return!0}function Ce(r,e){let t=r.toString(10);if(e<t.length)return"";let n=e-t.length,o=new Array(n);for(let s=0;s<n;s++)o[s]="0";return o.join("").concat(t)}var Lg=Math.log(2);function An(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function Hi(r){let e=0,t=0;for(let o=0;o<r.length;o++){let i=r[o];e+=i.byteLength}let n=new Uint8Array(e);for(let o=0;o<r.length;o++){let i=r[o];n.set(new Uint8Array(i),t),t+=i.byteLength}return n.buffer}function lt(r,e,t,n){return e instanceof Uint8Array?e.byteLength?t<0?(r.error="Wrong parameter: inputOffset less than zero",!1):n<0?(r.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-t-n<0?(r.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(r.error="Wrong parameter: inputBuffer has zero length",!1):(r.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}var Vr=class{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return Hi(this.items)}},Rr=[new Uint8Array([1])],Aa="0123456789";var fr="",Ke=new ArrayBuffer(0),Oi=new Uint8Array(0),Lr="EndOfContent",ka="OCTET STRING",Ca="BIT STRING";function ft(r){var e;return e=class extends r{constructor(...n){var o;super(...n);let i=n[0]||{};this.isHexOnly=(o=i.isHexOnly)!==null&&o!==void 0?o:!1,this.valueHexView=i.valueHex?G.BufferSourceConverter.toUint8Array(i.valueHex):Oi}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,o,i){let s=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!lt(this,s,o,i))return-1;let a=o+i;return this.valueHexView=s.subarray(o,a),this.valueHexView.length?(this.blockLength=i,a):(this.warnings.push("Zero buffer length"),o)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",Ke)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:G.Convert.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}var at=class{constructor({blockLength:e=0,error:t=fr,warnings:n=[],valueBeforeDecode:o=Oi}={}){this.blockLength=e,this.error=t,this.warnings=n,this.valueBeforeDecodeView=G.BufferSourceConverter.toUint8Array(o)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:G.Convert.ToHex(this.valueBeforeDecodeView)}}};at.NAME="baseBlock";var me=class extends at{fromBER(e,t,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}};me.NAME="valueBlock";var Sn=class extends ft(at){constructor({idBlock:e={}}={}){var t,n,o,i;super(),e?(this.isHexOnly=(t=e.isHexOnly)!==null&&t!==void 0?t:!1,this.valueHexView=e.valueHex?G.BufferSourceConverter.toUint8Array(e.valueHex):Oi,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(o=e.tagNumber)!==null&&o!==void 0?o:-1,this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",Ke}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){let o=new Uint8Array(1);if(!e){let i=this.tagNumber;i&=31,t|=i,o[0]=t}return o.buffer}if(!this.isHexOnly){let o=Tt(this.tagNumber,7),i=new Uint8Array(o),s=o.byteLength,a=new Uint8Array(s+1);if(a[0]=t|31,!e){for(let c=0;c<s-1;c++)a[c+1]=i[c]|128;a[s]=i[s-1]}return a.buffer}let n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=t|31,!e){let o=this.valueHexView;for(let i=0;i<o.length-1;i++)n[i+1]=o[i]|128;n[this.valueHexView.byteLength]=o[o.length-1]}return n.buffer}fromBER(e,t,n){let o=G.BufferSourceConverter.toUint8Array(e);if(!lt(this,o,t,n))return-1;let i=o.subarray(t,t+n);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;let a=i[0]&31;if(a!==31)this.tagNumber=a,this.blockLength=1;else{let c=1,f=this.valueHexView=new Uint8Array(255),u=255;for(;i[c]&128;){if(f[c-1]=i[c]&127,c++,c>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(c===u){u+=255;let h=new Uint8Array(u);for(let S=0;S<f.length;S++)h[S]=f[S];f=this.valueHexView=new Uint8Array(u)}}this.blockLength=c+1,f[c-1]=i[c]&127;let l=new Uint8Array(c);for(let h=0;h<c;h++)l[h]=f[h];f=this.valueHexView=new Uint8Array(c),f.set(l),this.blockLength<=9?this.tagNumber=$t(f,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}};Sn.NAME="identificationBlock";var kn=class extends at{constructor({lenBlock:e={}}={}){var t,n,o;super(),this.isIndefiniteForm=(t=e.isIndefiniteForm)!==null&&t!==void 0?t:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(o=e.length)!==null&&o!==void 0?o:0}fromBER(e,t,n){let o=G.BufferSourceConverter.toUint8Array(e);if(!lt(this,o,t,n))return-1;let i=o.subarray(t,t+n);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,t+this.blockLength;let s=i[0]&127;if(s>8)return this.error="Too big integer",-1;if(s+1>i.length)return this.error="End of input reached before message was fully decoded",-1;let a=t+1,c=o.subarray(a,a+s);return c[s-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=$t(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=s+1,t+this.blockLength}toBER(e=!1){let t,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(t),n[0]=128),t;if(this.longFormUsed){let o=Tt(this.length,8);if(o.byteLength>127)return this.error="Too big length",Ke;if(t=new ArrayBuffer(o.byteLength+1),e)return t;let i=new Uint8Array(o);n=new Uint8Array(t),n[0]=o.byteLength|128;for(let s=0;s<o.byteLength;s++)n[s+1]=i[s];return t}return t=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(t),n[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}};kn.NAME="lengthBlock";var R={},he=class extends at{constructor({name:e=fr,optional:t=!1,primitiveSchema:n,...o}={},i){super(o),this.name=e,this.optional=t,n&&(this.primitiveSchema=n),this.idBlock=new Sn(o),this.lenBlock=new kn(o),this.valueBlock=i?new i(o):new me(o)}fromBER(e,t,n){let o=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return o===-1?(this.error=this.valueBlock.error,o):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),o)}toBER(e,t){let n=t||new Vr;t||Ta(this);let o=this.idBlock.toBER(e);if(n.write(o),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{let i=this.valueBlock.toBER(e);this.lenBlock.length=i.byteLength;let s=this.lenBlock.toBER(e);n.write(s),n.write(i)}return t?Ke:n.final()}toJSON(){let e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():G.Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${G.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;let t=this.toBER(),n=e.toBER();return Ea(t,n)}};he.NAME="BaseBlock";function Ta(r){if(r instanceof R.Constructed)for(let e of r.valueBlock.value)Ta(e)&&(r.lenBlock.isIndefiniteForm=!0);return!!r.lenBlock.isIndefiniteForm}var Cn=class extends he{constructor({value:e=fr,...t}={},n){super(t,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,n){let o=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return o===-1?(this.error=this.valueBlock.error,o):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),o)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}};Cn.NAME="BaseStringBlock";var Tn=class extends ft(me){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}};Tn.NAME="PrimitiveValueBlock";var Na,Nn=class extends he{constructor(e={}){super(e,Tn),this.idBlock.isConstructed=!1}};Na=Nn;R.Primitive=Na;Nn.NAME="PRIMITIVE";function $h(r,e){if(r instanceof e)return r;let t=new e;return t.idBlock=r.idBlock,t.lenBlock=r.lenBlock,t.warnings=r.warnings,t.valueBeforeDecodeView=r.valueBeforeDecodeView,t}function uo(r,e=0,t=r.length){let n=e,o=new he({},me),i=new at;if(!lt(i,r,e,t))return o.error=i.error,{offset:-1,result:o};if(!r.subarray(e,e+t).length)return o.error="Zero buffer length",{offset:-1,result:o};let a=o.idBlock.fromBER(r,e,t);if(o.idBlock.warnings.length&&o.warnings.concat(o.idBlock.warnings),a===-1)return o.error=o.idBlock.error,{offset:-1,result:o};if(e=a,t-=o.idBlock.blockLength,a=o.lenBlock.fromBER(r,e,t),o.lenBlock.warnings.length&&o.warnings.concat(o.lenBlock.warnings),a===-1)return o.error=o.lenBlock.error,{offset:-1,result:o};if(e=a,t-=o.lenBlock.blockLength,!o.idBlock.isConstructed&&o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let c=he;switch(o.idBlock.tagClass){case 1:if(o.idBlock.tagNumber>=37&&o.idBlock.isHexOnly===!1)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};c=R.EndOfContent;break;case 1:c=R.Boolean;break;case 2:c=R.Integer;break;case 3:c=R.BitString;break;case 4:c=R.OctetString;break;case 5:c=R.Null;break;case 6:c=R.ObjectIdentifier;break;case 10:c=R.Enumerated;break;case 12:c=R.Utf8String;break;case 13:c=R.RelativeObjectIdentifier;break;case 14:c=R.TIME;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:c=R.Sequence;break;case 17:c=R.Set;break;case 18:c=R.NumericString;break;case 19:c=R.PrintableString;break;case 20:c=R.TeletexString;break;case 21:c=R.VideotexString;break;case 22:c=R.IA5String;break;case 23:c=R.UTCTime;break;case 24:c=R.GeneralizedTime;break;case 25:c=R.GraphicString;break;case 26:c=R.VisibleString;break;case 27:c=R.GeneralString;break;case 28:c=R.UniversalString;break;case 29:c=R.CharacterString;break;case 30:c=R.BmpString;break;case 31:c=R.DATE;break;case 32:c=R.TimeOfDay;break;case 33:c=R.DateTime;break;case 34:c=R.Duration;break;default:{let f=o.idBlock.isConstructed?new R.Constructed:new R.Primitive;f.idBlock=o.idBlock,f.lenBlock=o.lenBlock,f.warnings=o.warnings,o=f}}break;case 2:case 3:case 4:default:c=o.idBlock.isConstructed?R.Constructed:R.Primitive}return o=$h(o,c),a=o.fromBER(r,e,o.lenBlock.isIndefiniteForm?t:o.lenBlock.length),o.valueBeforeDecodeView=r.subarray(n,n+o.blockLength),{offset:a,result:o}}function Di(r){if(!r.byteLength){let e=new he({},me);return e.error="Input buffer has zero length",{offset:-1,result:e}}return uo(G.BufferSourceConverter.toUint8Array(r).slice(),0,r.byteLength)}function Ph(r,e){return r?1:e}var We=class extends me{constructor({value:e=[],isIndefiniteForm:t=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,n){let o=G.BufferSourceConverter.toUint8Array(e);if(!lt(this,o,t,n))return-1;if(this.valueBeforeDecodeView=o.subarray(t,t+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),t;let i=t;for(;Ph(this.isIndefiniteForm,n)>0;){let s=uo(o,i,n);if(s.offset===-1)return this.error=s.result.error,this.warnings.concat(s.result.warnings),-1;if(i=s.offset,this.blockLength+=s.result.blockLength,n-=s.result.blockLength,this.value.push(s.result),this.isIndefiniteForm&&s.result.constructor.NAME===Lr)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===Lr?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,t){let n=t||new Vr;for(let o=0;o<this.value.length;o++)this.value[o].toBER(e,n);return t?Ke:n.final()}toJSON(){let e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let t of this.value)e.value.push(t.toJSON());return e}};We.NAME="ConstructedValueBlock";var Ia,Nt=class extends he{constructor(e={}){super(e,We),this.idBlock.isConstructed=!0}fromBER(e,t,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let o=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return o===-1?(this.error=this.valueBlock.error,o):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),o)}onAsciiEncoding(){let e=[];for(let n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(o=>`  ${o}`).join(`
`));let t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :
${e.join(`
`)}`:`${t} :`}};Ia=Nt;R.Constructed=Ia;Nt.NAME="CONSTRUCTED";var In=class extends me{fromBER(e,t,n){return t}toBER(e){return Ke}};In.override="EndOfContentValueBlock";var Ua,Un=class extends he{constructor(e={}){super(e,In),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}};Ua=Un;R.EndOfContent=Ua;Un.NAME=Lr;var _a,cr=class extends he{constructor(e={}){super(e,me),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,t+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+n}toBER(e,t){let n=new ArrayBuffer(2);if(!e){let o=new Uint8Array(n);o[0]=5,o[1]=0}return t&&t.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}};_a=cr;R.Null=_a;cr.NAME="NULL";var _n=class extends ft(me){constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=G.BufferSourceConverter.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(let e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,n){let o=G.BufferSourceConverter.toUint8Array(e);return lt(this,o,t,n)?(this.valueHexView=o.subarray(t,t+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,Fi.call(this),this.blockLength=n,t+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}};_n.NAME="BooleanValueBlock";var Ra,Rn=class extends he{constructor(e={}){super(e,_n),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};Ra=Rn;R.Boolean=Ra;Rn.NAME="BOOLEAN";var Vn=class extends ft(We){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,n){let o=0;if(this.isConstructed){if(this.isHexOnly=!1,o=We.prototype.fromBER.call(this,e,t,n),o===-1)return o;for(let i=0;i<this.value.length;i++){let s=this.value[i].constructor.NAME;if(s===Lr){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(s!==ka)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,o=super.fromBER(e,t,n),this.blockLength=n;return o}toBER(e,t){return this.isConstructed?We.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}};Vn.NAME="OctetStringValueBlock";var Va,Ln=class r extends he{constructor({idBlock:e={},lenBlock:t={},...n}={}){var o,i;(o=n.isConstructed)!==null&&o!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},Vn),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){let i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+n);try{if(i.byteLength){let s=uo(i,0,i.byteLength);s.offset!==-1&&s.offset===n&&(this.valueBlock.value=[s.result])}}catch{}}return super.fromBER(e,t,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Nt.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${G.Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let e=[];for(let t of this.valueBlock.value)t instanceof r&&e.push(t.valueBlock.valueHexView);return G.BufferSourceConverter.concat(e)}};Va=Ln;R.OctetString=Va;Ln.NAME=ka;var Fn=class extends ft(We){constructor({unusedBits:e=0,isConstructed:t=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,n){if(!n)return t;let o=-1;if(this.isConstructed){if(o=We.prototype.fromBER.call(this,e,t,n),o===-1)return o;for(let a of this.value){let c=a.constructor.NAME;if(c===Lr){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(c!==Ca)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let f=a.valueBlock;if(this.unusedBits>0&&f.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=f.unusedBits}return o}let i=G.BufferSourceConverter.toUint8Array(e);if(!lt(this,i,t,n))return-1;let s=i.subarray(t,t+n);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let a=s.subarray(1);try{if(a.byteLength){let c=uo(a,0,a.byteLength);c.offset!==-1&&c.offset===n-1&&(this.value=[c.result])}}catch{}}return this.valueHexView=s.subarray(1),this.blockLength=s.length,t+n}toBER(e,t){if(this.isConstructed)return We.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return Ke;let n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}};Fn.NAME="BitStringValueBlock";var La,ur=class extends he{constructor({idBlock:e={},lenBlock:t={},...n}={}){var o,i;(o=n.isConstructed)!==null&&o!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},Fn),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Nt.prototype.onAsciiEncoding.call(this);{let e=[],t=this.valueBlock.valueHexView;for(let o of t)e.push(o.toString(2).padStart(8,"0"));let n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}};La=ur;R.BitString=La;ur.NAME=Ca;var Fa;function Kh(r,e){let t=new Uint8Array([0]),n=new Uint8Array(r),o=new Uint8Array(e),i=n.slice(0),s=i.length-1,a=o.slice(0),c=a.length-1,f=0,u=c<s?s:c,l=0;for(let h=u;h>=0;h--,l++){switch(!0){case l<a.length:f=i[s-l]+a[c-l]+t[0];break;default:f=i[s-l]+t[0]}switch(t[0]=f/10,!0){case l>=i.length:i=En(new Uint8Array([f%10]),i);break;default:i[s-l]=f%10}}return t[0]>0&&(i=En(t,i)),i}function Sa(r){if(r>=Rr.length)for(let e=Rr.length;e<=r;e++){let t=new Uint8Array([0]),n=Rr[e-1].slice(0);for(let o=n.length-1;o>=0;o--){let i=new Uint8Array([(n[o]<<1)+t[0]]);t[0]=i[0]/10,n[o]=i[0]%10}t[0]>0&&(n=En(t,n)),Rr.push(n)}return Rr[r]}function qh(r,e){let t=0,n=new Uint8Array(r),o=new Uint8Array(e),i=n.slice(0),s=i.length-1,a=o.slice(0),c=a.length-1,f,u=0;for(let l=c;l>=0;l--,u++)switch(f=i[s-u]-a[c-u]-t,!0){case f<0:t=1,i[s-u]=f+10;break;default:t=0,i[s-u]=f}if(t>0)for(let l=s-c+1;l>=0;l--,u++)if(f=i[s-u]-t,f<0)t=1,i[s-u]=f+10;else{t=0,i[s-u]=f;break}return i.slice()}var Fr=class extends ft(me){constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=Fi.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(Ba(e))}get valueDec(){return this._valueDec}fromDER(e,t,n,o=0){let i=this.fromBER(e,t,n);if(i===-1)return i;let s=this.valueHexView;return s[0]===0&&s[1]&128?this.valueHexView=s.subarray(1):o!==0&&s.length<o&&(o-s.length>1&&(o=s.length+1),this.valueHexView=s.subarray(o-s.length)),i}toDER(e=!1){let t=this.valueHexView;switch(!0){case(t[0]&128)!==0:{let n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(t,1),this.valueHexView=n}break;case(t[0]===0&&(t[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,t,n){let o=super.fromBER(e,t,n);return o===-1||this.setValueHex(),o}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let e=this.valueHexView.length*8-1,t=new Uint8Array(this.valueHexView.length*8/3),n=0,o,i=this.valueHexView,s="",a=!1;for(let c=i.byteLength-1;c>=0;c--){o=i[c];for(let f=0;f<8;f++){if((o&1)===1)switch(n){case e:t=qh(Sa(n),t),s="-";break;default:t=Kh(t,Sa(n))}n++,o>>=1}}for(let c=0;c<t.length;c++)t[c]&&(a=!0),a&&(s+=Aa.charAt(t[c]));return a===!1&&(s+=Aa.charAt(0)),s}};Fa=Fr;Fr.NAME="IntegerValueBlock";Object.defineProperty(Fa.prototype,"valueHex",{set:function(r){this.valueHexView=new Uint8Array(r),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var Ha,de=class r extends he{constructor(e={}){super(e,Fr),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return An(),BigInt(this.valueBlock.toString())}static fromBigInt(e){An();let t=BigInt(e),n=new Vr,o=t.toString(16).replace(/^-/,""),i=new Uint8Array(G.Convert.FromHex(o));if(t<0){let a=new Uint8Array(i.length+(i[0]&128?1:0));a[0]|=128;let f=BigInt(`0x${G.Convert.ToHex(a)}`)+t,u=G.BufferSourceConverter.toUint8Array(G.Convert.FromHex(f.toString(16)));u[0]|=128,n.write(u)}else i[0]&128&&n.write(new Uint8Array([0])),n.write(i);return new r({valueHex:n.final()})}convertToDER(){let e=new r({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new r({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}};Ha=de;R.Integer=Ha;de.NAME="INTEGER";var Oa,Hn=class extends de{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}};Oa=Hn;R.Enumerated=Oa;Hn.NAME="ENUMERATED";var Hr=class extends ft(me){constructor({valueDec:e=-1,isFirstSid:t=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,n){if(!n)return t;let o=G.BufferSourceConverter.toUint8Array(e);if(!lt(this,o,t,n))return-1;let i=o.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=i[a]&127,this.blockLength++,!!(i[a]&128));a++);let s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)s[a]=this.valueHexView[a];return this.valueHexView=s,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=$t(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){An();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;let n=new Uint8Array(t.length/7);for(let o=0;o<n.length;o++)n[o]=parseInt(t.slice(o*7,o*7+7),2)+(o+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let o=this.valueHexView,i=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength-1;s++)i[s]=o[s]|128;return i[this.blockLength-1]=o[this.blockLength-1],i.buffer}let t=Tt(this.valueDec,7);if(t.byteLength===0)return this.error="Error during encoding SID value",Ke;let n=new Uint8Array(t.byteLength);if(!e){let o=new Uint8Array(t),i=t.byteLength-1;for(let s=0;s<i;s++)n[s]=o[s]|128;n[i]=o[i]}return n}toString(){let e="";if(this.isHexOnly)e=G.Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}};Hr.NAME="sidBlock";var On=class extends me{constructor({value:e=fr,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let o=t;for(;n>0;){let i=new Hr;if(o=i.fromBER(e,o,n),o===-1)return this.blockLength=0,this.error=i.error,o;this.value.length===0&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return o}toBER(e){let t=[];for(let n=0;n<this.value.length;n++){let o=this.value[n].toBER(e);if(o.byteLength===0)return this.error=this.value[n].error,Ke;t.push(o)}return Hi(t)}fromString(e){this.value=[];let t=0,n=0,o="",i=!1;do if(n=e.indexOf(".",t),n===-1?o=e.substring(t):o=e.substring(t,n),t=n+1,i){let s=this.value[0],a=0;switch(s.valueDec){case 0:break;case 1:a=40;break;case 2:a=80;break;default:this.value=[];return}let c=parseInt(o,10);if(isNaN(c))return;s.valueDec=c+a,i=!1}else{let s=new Hr;if(o>Number.MAX_SAFE_INTEGER){An();let a=BigInt(o);s.valueBigInt=a}else if(s.valueDec=parseInt(o,10),isNaN(s.valueDec))return;this.value.length||(s.isFirstSid=!0,i=!0),this.value.push(s)}while(n!==-1)}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let o=this.value[n].toString();n!==0&&(e=`${e}.`),t?(o=`{${o}}`,this.value[n].isFirstSid?e=`2.{${o} - 80}`:e+=o):e+=o}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}};On.NAME="ObjectIdentifierValueBlock";var Da,lr=class extends he{constructor(e={}){super(e,On),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};Da=lr;R.ObjectIdentifier=Da;lr.NAME="OBJECT IDENTIFIER";var Or=class extends ft(at){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,n){if(n===0)return t;let o=G.BufferSourceConverter.toUint8Array(e);if(!lt(this,o,t,n))return-1;let i=o.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=i[a]&127,this.blockLength++,!!(i[a]&128));a++);let s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)s[a]=this.valueHexView[a];return this.valueHexView=s,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=$t(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let o=this.valueHexView,i=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength-1;s++)i[s]=o[s]|128;return i[this.blockLength-1]=o[this.blockLength-1],i.buffer}let t=Tt(this.valueDec,7);if(t.byteLength===0)return this.error="Error during encoding SID value",Ke;let n=new Uint8Array(t.byteLength);if(!e){let o=new Uint8Array(t),i=t.byteLength-1;for(let s=0;s<i;s++)n[s]=o[s]|128;n[i]=o[i]}return n.buffer}toString(){let e="";return this.isHexOnly?e=G.Convert.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}};Or.NAME="relativeSidBlock";var Dn=class extends me{constructor({value:e=fr,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let o=t;for(;n>0;){let i=new Or;if(o=i.fromBER(e,o,n),o===-1)return this.blockLength=0,this.error=i.error,o;this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return o}toBER(e,t){let n=[];for(let o=0;o<this.value.length;o++){let i=this.value[o].toBER(e);if(i.byteLength===0)return this.error=this.value[o].error,Ke;n.push(i)}return Hi(n)}fromString(e){this.value=[];let t=0,n=0,o="";do{n=e.indexOf(".",t),n===-1?o=e.substring(t):o=e.substring(t,n),t=n+1;let i=new Or;if(i.valueDec=parseInt(o,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(n!==-1);return!0}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let o=this.value[n].toString();n!==0&&(e=`${e}.`),t&&(o=`{${o}}`),e+=o}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}};Dn.NAME="RelativeObjectIdentifierValueBlock";var Ma,Mn=class extends he{constructor(e={}){super(e,Dn),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};Ma=Mn;R.RelativeObjectIdentifier=Ma;Mn.NAME="RelativeObjectIdentifier";var $a,ct=class extends Nt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}};$a=ct;R.Sequence=$a;ct.NAME="SEQUENCE";var Pa,$n=class extends Nt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};Pa=$n;R.Set=Pa;$n.NAME="SET";var Pn=class extends ft(me){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=fr}toJSON(){return{...super.toJSON(),value:this.value}}};Pn.NAME="StringValueBlock";var Kn=class extends Pn{};Kn.NAME="SimpleStringValueBlock";var ve=class extends Cn{constructor({...e}={}){super(e,Kn)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,G.BufferSourceConverter.toUint8Array(e))}fromString(e){let t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t);for(let o=0;o<t;o++)n[o]=e.charCodeAt(o);this.valueBlock.value=e}};ve.NAME="SIMPLE STRING";var qn=class extends ve{fromBuffer(e){this.valueBlock.valueHexView=G.BufferSourceConverter.toUint8Array(e);try{this.valueBlock.value=G.Convert.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=G.Convert.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(G.Convert.FromUtf8String(e)),this.valueBlock.value=e}};qn.NAME="Utf8StringValueBlock";var Ka,ut=class extends qn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}};Ka=ut;R.Utf8String=Ka;ut.NAME="UTF8String";var zn=class extends ve{fromBuffer(e){this.valueBlock.value=G.Convert.ToUtf16String(e),this.valueBlock.valueHexView=G.BufferSourceConverter.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(G.Convert.FromUtf16String(e))}};zn.NAME="BmpStringValueBlock";var qa,Gn=class extends zn{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}};qa=Gn;R.BmpString=qa;Gn.NAME="BMPString";var jn=class extends ve{fromBuffer(e){let t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(t);for(let o=0;o<n.length;o+=4)n[o]=n[o+3],n[o+1]=n[o+2],n[o+2]=0,n[o+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){let t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t*4);for(let o=0;o<t;o++){let i=Tt(e.charCodeAt(o),8),s=new Uint8Array(i);if(s.length>4)continue;let a=4-s.length;for(let c=s.length-1;c>=0;c--)n[o*4+c+a]=s[c]}this.valueBlock.value=e}};jn.NAME="UniversalStringValueBlock";var za,Zn=class extends jn{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}};za=Zn;R.UniversalString=za;Zn.NAME="UniversalString";var Ga,Wn=class extends ve{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}};Ga=Wn;R.NumericString=Ga;Wn.NAME="NumericString";var ja,Jn=class extends ve{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}};ja=Jn;R.PrintableString=ja;Jn.NAME="PrintableString";var Za,Yn=class extends ve{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}};Za=Yn;R.TeletexString=Za;Yn.NAME="TeletexString";var Wa,Xn=class extends ve{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}};Wa=Xn;R.VideotexString=Wa;Xn.NAME="VideotexString";var Ja,Qn=class extends ve{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}};Ja=Qn;R.IA5String=Ja;Qn.NAME="IA5String";var Ya,eo=class extends ve{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}};Ya=eo;R.GraphicString=Ya;eo.NAME="GraphicString";var Xa,Dr=class extends ve{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}};Xa=Dr;R.VisibleString=Xa;Dr.NAME="VisibleString";var Qa,to=class extends ve{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}};Qa=to;R.GeneralString=Qa;to.NAME="GeneralString";var ec,ro=class extends ve{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}};ec=ro;R.CharacterString=ec;ro.NAME="CharacterString";var tc,Mr=class extends Dr{constructor({value:e,valueDate:t,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let o=0;o<e.length;o++)this.valueBlock.valueHexView[o]=e.charCodeAt(o)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,G.BufferSourceConverter.toUint8Array(e)))}toBuffer(){let e=this.toString(),t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){let n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}let o=parseInt(n[1],10);o>=50?this.year=1900+o:this.year=2e3+o,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){let t=new Array(7);return t[0]=Ce(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=Ce(this.month,2),t[2]=Ce(this.day,2),t[3]=Ce(this.hour,2),t[4]=Ce(this.minute,2),t[5]=Ce(this.second,2),t[6]="Z",t.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}};tc=Mr;R.UTCTime=tc;Mr.NAME="UTCTime";var rc,no=class extends Mr{constructor(e={}){var t;super(e),(t=this.millisecond)!==null&&t!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=!1,n="",o="",i=0,s,a=0,c=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),t=!0;else{let l=new Number(e[e.length-1]);if(isNaN(l.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(t){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let l=1,h=n.indexOf("+"),S="";if(h===-1&&(h=n.indexOf("-"),l=-1),h!==-1){if(S=n.substring(h+1),n=n.substring(0,h),S.length!==2&&S.length!==4)throw new Error("Wrong input string for conversion");let k=parseInt(S.substring(0,2),10);if(isNaN(k.valueOf()))throw new Error("Wrong input string for conversion");if(a=l*k,S.length===4){if(k=parseInt(S.substring(2,4),10),isNaN(k.valueOf()))throw new Error("Wrong input string for conversion");c=l*k}}}let f=n.indexOf(".");if(f===-1&&(f=n.indexOf(",")),f!==-1){let l=new Number(`0${n.substring(f)}`);if(isNaN(l.valueOf()))throw new Error("Wrong input string for conversion");i=l.valueOf(),o=n.substring(0,f)}else o=n;switch(!0){case o.length===8:if(s=/(\d{4})(\d{2})(\d{2})/ig,f!==-1)throw new Error("Wrong input string for conversion");break;case o.length===10:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let l=60*i;this.minute=Math.floor(l),l=60*(l-this.minute),this.second=Math.floor(l),l=1e3*(l-this.second),this.millisecond=Math.floor(l)}break;case o.length===12:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let l=60*i;this.second=Math.floor(l),l=1e3*(l-this.second),this.millisecond=Math.floor(l)}break;case o.length===14:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let l=1e3*i;this.millisecond=Math.floor(l)}break;default:throw new Error("Wrong input string for conversion")}let u=s.exec(o);if(u===null)throw new Error("Wrong input string for conversion");for(let l=1;l<u.length;l++)switch(l){case 1:this.year=parseInt(u[l],10);break;case 2:this.month=parseInt(u[l],10);break;case 3:this.day=parseInt(u[l],10);break;case 4:this.hour=parseInt(u[l],10)+a;break;case 5:this.minute=parseInt(u[l],10)+c;break;case 6:this.second=parseInt(u[l],10);break;default:throw new Error("Wrong input string for conversion")}if(t===!1){let l=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=l.getUTCFullYear(),this.month=l.getUTCMonth(),this.day=l.getUTCDay(),this.hour=l.getUTCHours(),this.minute=l.getUTCMinutes(),this.second=l.getUTCSeconds(),this.millisecond=l.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){let t=[];return t.push(Ce(this.year,4)),t.push(Ce(this.month,2)),t.push(Ce(this.day,2)),t.push(Ce(this.hour,2)),t.push(Ce(this.minute,2)),t.push(Ce(this.second,2)),this.millisecond!==0&&(t.push("."),t.push(Ce(this.millisecond,3))),t.push("Z"),t.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}};rc=no;R.GeneralizedTime=rc;no.NAME="GeneralizedTime";var nc,oo=class extends ut{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};nc=oo;R.DATE=nc;oo.NAME="DATE";var oc,io=class extends ut{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}};oc=io;R.TimeOfDay=oc;io.NAME="TimeOfDay";var ic,so=class extends ut{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}};ic=so;R.DateTime=ic;so.NAME="DateTime";var sc,ao=class extends ut{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}};sc=ao;R.Duration=sc;ao.NAME="Duration";var ac,co=class extends ut{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}};ac=co;R.TIME=ac;co.NAME="TIME";function Be(r,e="utf8"){let t=xn[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return t.encoder.encode(r).substring(1)}var $r=class extends Error{constructor(e="An error occurred while verifying a message"){super(e),this.name="VerificationError"}},lo=class extends Error{constructor(e="Missing Web Crypto API"){super(e),this.name="WebCryptoMissingError"}};var cc={get(r=globalThis){let e=r.crypto;if(e?.subtle==null)throw new lo("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return e}};var It=cc;async function uc(r){let e=await It.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:r,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),t=await Gh(e);return{privateKey:t[0],publicKey:t[1]}}async function lc(r,e){let t=await It.get().subtle.importKey("jwk",r,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await It.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},t,e instanceof Uint8Array?e:e.subarray());return new Uint8Array(n,0,n.byteLength)}async function fc(r,e,t){let n=await It.get().subtle.importKey("jwk",r,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return It.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,t instanceof Uint8Array?t:t.subarray())}async function Gh(r){if(r.privateKey==null||r.publicKey==null)throw new Ae("Private and public key are required");return Promise.all([It.get().subtle.exportKey("jwk",r.privateKey),It.get().subtle.exportKey("jwk",r.publicKey)])}function Mi(r){if(r.kty!=="RSA")throw new Ae("invalid key type");if(r.n==null)throw new Ae("invalid key modulus");return X(r.n,"base64url").length*8}var hr=class{type="RSA";_key;_raw;_multihash;constructor(e,t){this._key=e,this._multihash=t}get raw(){return this._raw==null&&(this._raw=Pr.jwkToPkix(this._key)),this._raw}toMultihash(){return this._multihash}toCID(){return we.createV1(114,this._multihash)}toString(){return ae.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Ge(this.raw,e.raw)}verify(e,t){return fc(this._key,t,e)}},Kr=class{type="RSA";_key;_raw;publicKey;constructor(e,t){this._key=e,this.publicKey=t}get raw(){return this._raw==null&&(this._raw=Pr.jwkToPkcs1(this._key)),this._raw}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Ge(this.raw,e.raw)}sign(e){return lc(this._key,e)}};var fo=8192,$i=18;function hc(r){let{result:e}=Di(r),t=e.valueBlock.value;return{n:Be(Je(t[1].toBigInt()),"base64url"),e:Be(Je(t[2].toBigInt()),"base64url"),d:Be(Je(t[3].toBigInt()),"base64url"),p:Be(Je(t[4].toBigInt()),"base64url"),q:Be(Je(t[5].toBigInt()),"base64url"),dp:Be(Je(t[6].toBigInt()),"base64url"),dq:Be(Je(t[7].toBigInt()),"base64url"),qi:Be(Je(t[8].toBigInt()),"base64url"),kty:"RSA",alg:"RS256"}}function jh(r){if(r.n==null||r.e==null||r.d==null||r.p==null||r.q==null||r.dp==null||r.dq==null||r.qi==null)throw new Ae("JWK was missing components");let t=new ct({value:[new de({value:0}),de.fromBigInt(Ye(X(r.n,"base64url"))),de.fromBigInt(Ye(X(r.e,"base64url"))),de.fromBigInt(Ye(X(r.d,"base64url"))),de.fromBigInt(Ye(X(r.p,"base64url"))),de.fromBigInt(Ye(X(r.q,"base64url"))),de.fromBigInt(Ye(X(r.dp,"base64url"))),de.fromBigInt(Ye(X(r.dq,"base64url"))),de.fromBigInt(Ye(X(r.qi,"base64url")))]}).toBER();return new Uint8Array(t,0,t.byteLength)}function dc(r){let{result:e}=Di(r),t=e.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:Be(Je(t[0].toBigInt()),"base64url"),e:Be(Je(t[1].toBigInt()),"base64url")}}function Pi(r){if(r.n==null||r.e==null)throw new Ae("JWK was missing components");let t=new ct({value:[new ct({value:[new lr({value:"1.2.840.113549.1.1.1"}),new cr]}),new ur({valueHex:new ct({value:[de.fromBigInt(Ye(X(r.n,"base64url"))),de.fromBigInt(Ye(X(r.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(t,0,t.byteLength)}function Je(r){let e=r.toString(16);e.length%2>0&&(e=`0${e}`);let t=e.length/2,n=new Uint8Array(t),o=0,i=0;for(;o<t;)n[o]=parseInt(e.slice(i,i+2),16),o+=1,i+=2;return n}function Ye(r){let e=[];return r.forEach(function(t){let n=t.toString(16);n.length%2>0&&(n=`0${n}`),e.push(n)}),BigInt("0x"+e.join(""))}function pc(r){let e=hc(r);return gc(e)}function Ki(r){let e=dc(r);if(Mi(e)>fo)throw new qt("Key size is too large");let t=sr(it.encode({Type:fe.RSA,Data:r})),n=Oe($i,t);return new hr(e,n)}function gc(r){if(Mi(r)>fo)throw new Ae("Key size is too large");let e=yc(r),t=sr(it.encode({Type:fe.RSA,Data:Pi(e.publicKey)})),n=Oe($i,t);return new Kr(e.privateKey,new hr(e.publicKey,n))}async function mc(r){if(r>fo)throw new Ae("Key size is too large");let e=await uc(r),t=sr(it.encode({Type:fe.RSA,Data:Pi(e.publicKey)})),n=Oe($i,t);return new Kr(e.privateKey,new hr(e.publicKey,n))}function yc(r){if(r==null)throw new Ae("Missing key parameter");return{privateKey:r,publicKey:{kty:r.kty,n:r.n,e:r.e}}}var ho=class extends Xt{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Rs(e);let n=Sr(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(n.length>o?e.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(e){return Yt(this),this.iHash.update(e),this}digestInto(e){Yt(this),Jt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:o,destroyed:i,blockLen:s,outputLen:a}=this;return e=e,e.finished=o,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},qi=(r,e,t)=>new ho(r,e).update(t).digest();qi.create=(r,e)=>new ho(r,e);function xc(r){r.lowS!==void 0&&Me("lowS",r.lowS),r.prehash!==void 0&&Me("prehash",r.prehash)}function Zh(r){let e=Tr(r);je(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:n,a:o}=e;if(t){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:Wh,hexToBytes:Jh}=un,ht={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(r,e)=>{let{Err:t}=ht;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let n=e.length/2,o=Vt(n);if(o.length/2&128)throw new t("tlv.encode: long form length too big");let i=n>127?Vt(o.length/2|128):"";return`${Vt(r)}${i}${o}${e}`},decode(r,e){let{Err:t}=ht,n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");let o=e[n++],i=!!(o&128),s=0;if(!i)s=o;else{let c=o&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");let f=e.subarray(n,n+c);if(f.length!==c)throw new t("tlv.decode: length bytes not complete");if(f[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let u of f)s=s<<8|u;if(n+=c,s<128)throw new t("tlv.decode(long): not minimal encoding")}let a=e.subarray(n,n+s);if(a.length!==s)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+s)}}},_int:{encode(r){let{Err:e}=ht;if(r<dt)throw new e("integer: negative integers are not allowed");let t=Vt(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected assertion");return t},decode(r){let{Err:e}=ht;if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return Wh(r)}},toSig(r){let{Err:e,_int:t,_tlv:n}=ht,o=typeof r=="string"?Jh(r):r;er(o);let{v:i,l:s}=n.decode(48,o);if(s.length)throw new e("Invalid signature: left bytes after parsing");let{v:a,l:c}=n.decode(2,i),{v:f,l:u}=n.decode(2,c);if(u.length)throw new e("Invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(f)}},hexFromSig(r){let{_tlv:e,_int:t}=ht,n=`${e.encode(2,t.encode(r.r))}${e.encode(2,t.encode(r.s))}`;return e.encode(48,n)}},dt=BigInt(0),ce=BigInt(1),dm=BigInt(2),wc=BigInt(3),pm=BigInt(4);function Yh(r){let e=Zh(r),{Fp:t}=e,n=Et(e.n,e.nBitLength),o=e.toBytes||((y,d,v)=>{let T=d.toAffine();return ot(Uint8Array.from([4]),t.toBytes(T.x),t.toBytes(T.y))}),i=e.fromBytes||(y=>{let d=y.subarray(1),v=t.fromBytes(d.subarray(0,t.BYTES)),T=t.fromBytes(d.subarray(t.BYTES,2*t.BYTES));return{x:v,y:T}});function s(y){let{a:d,b:v}=e,T=t.sqr(y),w=t.mul(T,y);return t.add(t.add(w,t.mul(y,d)),v)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function a(y){return kr(y,ce,e.n)}function c(y){let{allowedPrivateKeyLengths:d,nByteLength:v,wrapPrivateKey:T,n:w}=e;if(d&&typeof y!="bigint"){if(bt(y)&&(y=rt(y)),typeof y!="string"||!d.includes(y.length))throw new Error("Invalid key");y=y.padStart(v*2,"0")}let N;try{N=typeof y=="bigint"?y:nt(re("private key",y,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof y}`)}return T&&(N=J(N,w)),Se("private key",N,ce,w),N}function f(y){if(!(y instanceof h))throw new Error("ProjectivePoint expected")}let u=Ht((y,d)=>{let{px:v,py:T,pz:w}=y;if(t.eql(w,t.ONE))return{x:v,y:T};let N=y.is0();d==null&&(d=N?t.ONE:t.inv(w));let H=t.mul(v,d),L=t.mul(T,d),U=t.mul(w,d);if(N)return{x:t.ZERO,y:t.ZERO};if(!t.eql(U,t.ONE))throw new Error("invZ was invalid");return{x:H,y:L}}),l=Ht(y=>{if(y.is0()){if(e.allowInfinityPoint&&!t.is0(y.py))return;throw new Error("bad point: ZERO")}let{x:d,y:v}=y.toAffine();if(!t.isValid(d)||!t.isValid(v))throw new Error("bad point: x or y not FE");let T=t.sqr(v),w=s(d);if(!t.eql(T,w))throw new Error("bad point: equation left != right");if(!y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(d,v,T){if(this.px=d,this.py=v,this.pz=T,d==null||!t.isValid(d))throw new Error("x required");if(v==null||!t.isValid(v))throw new Error("y required");if(T==null||!t.isValid(T))throw new Error("z required");Object.freeze(this)}static fromAffine(d){let{x:v,y:T}=d||{};if(!d||!t.isValid(v)||!t.isValid(T))throw new Error("invalid affine point");if(d instanceof h)throw new Error("projective point not allowed");let w=N=>t.eql(N,t.ZERO);return w(v)&&w(T)?h.ZERO:new h(v,T,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(d){let v=t.invertBatch(d.map(T=>T.pz));return d.map((T,w)=>T.toAffine(v[w])).map(h.fromAffine)}static fromHex(d){let v=h.fromAffine(i(re("pointHex",d)));return v.assertValidity(),v}static fromPrivateKey(d){return h.BASE.multiply(c(d))}static msm(d,v){return hn(h,n,d,v)}_setWindowSize(d){k.setWindowSize(this,d)}assertValidity(){l(this)}hasEvenY(){let{y:d}=this.toAffine();if(t.isOdd)return!t.isOdd(d);throw new Error("Field doesn't support isOdd")}equals(d){f(d);let{px:v,py:T,pz:w}=this,{px:N,py:H,pz:L}=d,U=t.eql(t.mul(v,L),t.mul(N,w)),x=t.eql(t.mul(T,L),t.mul(H,w));return U&&x}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){let{a:d,b:v}=e,T=t.mul(v,wc),{px:w,py:N,pz:H}=this,L=t.ZERO,U=t.ZERO,x=t.ZERO,b=t.mul(w,w),O=t.mul(N,N),_=t.mul(H,H),I=t.mul(w,N);return I=t.add(I,I),x=t.mul(w,H),x=t.add(x,x),L=t.mul(d,x),U=t.mul(T,_),U=t.add(L,U),L=t.sub(O,U),U=t.add(O,U),U=t.mul(L,U),L=t.mul(I,L),x=t.mul(T,x),_=t.mul(d,_),I=t.sub(b,_),I=t.mul(d,I),I=t.add(I,x),x=t.add(b,b),b=t.add(x,b),b=t.add(b,_),b=t.mul(b,I),U=t.add(U,b),_=t.mul(N,H),_=t.add(_,_),b=t.mul(_,I),L=t.sub(L,b),x=t.mul(_,O),x=t.add(x,x),x=t.add(x,x),new h(L,U,x)}add(d){f(d);let{px:v,py:T,pz:w}=this,{px:N,py:H,pz:L}=d,U=t.ZERO,x=t.ZERO,b=t.ZERO,O=e.a,_=t.mul(e.b,wc),I=t.mul(v,N),P=t.mul(T,H),E=t.mul(w,L),A=t.add(v,T),m=t.add(N,H);A=t.mul(A,m),m=t.add(I,P),A=t.sub(A,m),m=t.add(v,w);let p=t.add(N,L);return m=t.mul(m,p),p=t.add(I,E),m=t.sub(m,p),p=t.add(T,w),U=t.add(H,L),p=t.mul(p,U),U=t.add(P,E),p=t.sub(p,U),b=t.mul(O,m),U=t.mul(_,E),b=t.add(U,b),U=t.sub(P,b),b=t.add(P,b),x=t.mul(U,b),P=t.add(I,I),P=t.add(P,I),E=t.mul(O,E),m=t.mul(_,m),P=t.add(P,E),E=t.sub(I,E),E=t.mul(O,E),m=t.add(m,E),I=t.mul(P,m),x=t.add(x,I),I=t.mul(p,m),U=t.mul(A,U),U=t.sub(U,I),I=t.mul(A,P),b=t.mul(p,b),b=t.add(b,I),new h(U,x,b)}subtract(d){return this.add(d.negate())}is0(){return this.equals(h.ZERO)}wNAF(d){return k.wNAFCached(this,d,h.normalizeZ)}multiplyUnsafe(d){Se("scalar",d,dt,e.n);let v=h.ZERO;if(d===dt)return v;if(d===ce)return this;let{endo:T}=e;if(!T)return k.unsafeLadder(this,d);let{k1neg:w,k1:N,k2neg:H,k2:L}=T.splitScalar(d),U=v,x=v,b=this;for(;N>dt||L>dt;)N&ce&&(U=U.add(b)),L&ce&&(x=x.add(b)),b=b.double(),N>>=ce,L>>=ce;return w&&(U=U.negate()),H&&(x=x.negate()),x=new h(t.mul(x.px,T.beta),x.py,x.pz),U.add(x)}multiply(d){let{endo:v,n:T}=e;Se("scalar",d,ce,T);let w,N;if(v){let{k1neg:H,k1:L,k2neg:U,k2:x}=v.splitScalar(d),{p:b,f:O}=this.wNAF(L),{p:_,f:I}=this.wNAF(x);b=k.constTimeNegate(H,b),_=k.constTimeNegate(U,_),_=new h(t.mul(_.px,v.beta),_.py,_.pz),w=b.add(_),N=O.add(I)}else{let{p:H,f:L}=this.wNAF(d);w=H,N=L}return h.normalizeZ([w,N])[0]}multiplyAndAddUnsafe(d,v,T){let w=h.BASE,N=(L,U)=>U===dt||U===ce||!L.equals(w)?L.multiplyUnsafe(U):L.multiply(U),H=N(this,v).add(N(d,T));return H.is0()?void 0:H}toAffine(d){return u(this,d)}isTorsionFree(){let{h:d,isTorsionFree:v}=e;if(d===ce)return!0;if(v)return v(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:d,clearCofactor:v}=e;return d===ce?this:v?v(h,this):this.multiplyUnsafe(e.h)}toRawBytes(d=!0){return Me("isCompressed",d),this.assertValidity(),o(h,this,d)}toHex(d=!0){return Me("isCompressed",d),rt(this.toRawBytes(d))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);let S=e.nBitLength,k=fn(h,e.endo?Math.ceil(S/2):S);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:a}}function Xh(r){let e=Tr(r);return je(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function bc(r){let e=Xh(r),{Fp:t,n}=e,o=t.BYTES+1,i=2*t.BYTES+1;function s(E){return J(E,n)}function a(E){return ln(E,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:l}=Yh({...e,toBytes(E,A,m){let p=A.toAffine(),B=t.toBytes(p.x),F=ot;return Me("isCompressed",m),m?F(Uint8Array.from([A.hasEvenY()?2:3]),B):F(Uint8Array.from([4]),B,t.toBytes(p.y))},fromBytes(E){let A=E.length,m=E[0],p=E.subarray(1);if(A===o&&(m===2||m===3)){let B=nt(p);if(!kr(B,ce,t.ORDER))throw new Error("Point is not on curve");let F=u(B),D;try{D=t.sqrt(F)}catch(j){let z=j instanceof Error?": "+j.message:"";throw new Error("Point is not on curve"+z)}let M=(D&ce)===ce;return(m&1)===1!==M&&(D=t.neg(D)),{x:B,y:D}}else if(A===i&&m===4){let B=t.fromBytes(p.subarray(0,t.BYTES)),F=t.fromBytes(p.subarray(t.BYTES,2*t.BYTES));return{x:B,y:F}}else throw new Error(`Point of length ${A} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),h=E=>rt(Bt(E,e.nByteLength));function S(E){let A=n>>ce;return E>A}function k(E){return S(E)?s(-E):E}let y=(E,A,m)=>nt(E.slice(A,m));class d{constructor(A,m,p){this.r=A,this.s=m,this.recovery=p,this.assertValidity()}static fromCompact(A){let m=e.nByteLength;return A=re("compactSignature",A,m*2),new d(y(A,0,m),y(A,m,2*m))}static fromDER(A){let{r:m,s:p}=ht.toSig(re("DER",A));return new d(m,p)}assertValidity(){Se("r",this.r,ce,n),Se("s",this.s,ce,n)}addRecoveryBit(A){return new d(this.r,this.s,A)}recoverPublicKey(A){let{r:m,s:p,recovery:B}=this,F=L(re("msgHash",A));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");let D=B===2||B===3?m+e.n:m;if(D>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let M=B&1?"03":"02",q=c.fromHex(M+h(D)),j=a(D),z=s(-F*j),W=s(p*j),Y=c.BASE.multiplyAndAddUnsafe(q,z,W);if(!Y)throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Lt(this.toDERHex())}toDERHex(){return ht.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Lt(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}let v={isValidPrivateKey(E){try{return f(E),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let E=ti(e.n);return Gs(e.randomBytes(E),e.n)},precompute(E=8,A=c.BASE){return A._setWindowSize(E),A.multiply(BigInt(3)),A}};function T(E,A=!0){return c.fromPrivateKey(E).toRawBytes(A)}function w(E){let A=bt(E),m=typeof E=="string",p=(A||m)&&E.length;return A?p===o||p===i:m?p===2*o||p===2*i:E instanceof c}function N(E,A,m=!0){if(w(E))throw new Error("first arg must be private key");if(!w(A))throw new Error("second arg must be public key");return c.fromHex(A).multiply(f(E)).toRawBytes(m)}let H=e.bits2int||function(E){let A=nt(E),m=E.length*8-e.nBitLength;return m>0?A>>BigInt(m):A},L=e.bits2int_modN||function(E){return s(H(E))},U=Cr(e.nBitLength);function x(E){return Se(`num < 2^${e.nBitLength}`,E,dt,U),Bt(E,e.nByteLength)}function b(E,A,m=O){if(["recovered","canonical"].some(se=>se in m))throw new Error("sign() legacy options not supported");let{hash:p,randomBytes:B}=e,{lowS:F,prehash:D,extraEntropy:M}=m;F==null&&(F=!0),E=re("msgHash",E),xc(m),D&&(E=re("prehashed msgHash",p(E)));let q=L(E),j=f(A),z=[x(j),x(q)];if(M!=null&&M!==!1){let se=M===!0?B(t.BYTES):M;z.push(re("extraEntropy",se))}let W=ot(...z),Y=q;function ie(se){let le=H(se);if(!l(le))return;let ye=a(le),ne=c.BASE.multiply(le).toAffine(),Ee=s(ne.x);if(Ee===dt)return;let Qe=s(ye*s(Y+Ee*j));if(Qe===dt)return;let wr=(ne.x===Ee?0:2)|Number(ne.y&ce),br=Qe;return F&&S(Qe)&&(br=k(Qe),wr^=1),new d(Ee,br,wr)}return{seed:W,k2sig:ie}}let O={lowS:e.lowS,prehash:!1},_={lowS:e.lowS,prehash:!1};function I(E,A,m=O){let{seed:p,k2sig:B}=b(E,A,m),F=e;return Yo(F.hash.outputLen,F.nByteLength,F.hmac)(p,B)}c.BASE._setWindowSize(8);function P(E,A,m,p=_){let B=E;if(A=re("msgHash",A),m=re("publicKey",m),"strict"in p)throw new Error("options.strict was renamed to lowS");xc(p);let{lowS:F,prehash:D}=p,M,q;try{if(typeof B=="string"||bt(B))try{M=d.fromDER(B)}catch(ne){if(!(ne instanceof ht.Err))throw ne;M=d.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){let{r:ne,s:Ee}=B;M=new d(ne,Ee)}else throw new Error("PARSE");q=c.fromHex(m)}catch(ne){if(ne.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(F&&M.hasHighS())return!1;D&&(A=e.hash(A));let{r:j,s:z}=M,W=L(A),Y=a(z),ie=s(W*Y),se=s(j*Y),le=c.BASE.multiplyAndAddUnsafe(q,ie,se)?.toAffine();return le?s(le.x)===j:!1}return{CURVE:e,getPublicKey:T,getSharedSecret:N,sign:I,verify:P,ProjectivePoint:c,Signature:d,utils:v}}function Qh(r){return{hash:r,hmac:(e,...t)=>qi(r,e,Ko(...t)),randomBytes:sn}}function vc(r,e){let t=n=>bc({...r,...Qh(n)});return Object.freeze({...t(e),create:t})}var Ac=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Bc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ed=BigInt(1),zi=BigInt(2),Ec=(r,e)=>(r+e/zi)/e;function td(r){let e=Ac,t=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),f=r*r*r%e,u=f*f*r%e,l=ee(u,t,e)*u%e,h=ee(l,t,e)*u%e,S=ee(h,zi,e)*f%e,k=ee(S,o,e)*S%e,y=ee(k,i,e)*k%e,d=ee(y,a,e)*y%e,v=ee(d,c,e)*d%e,T=ee(v,a,e)*y%e,w=ee(T,t,e)*u%e,N=ee(w,s,e)*k%e,H=ee(N,n,e)*f%e,L=ee(H,zi,e);if(!Gi.eql(Gi.sqr(L),r))throw new Error("Cannot find square root");return L}var Gi=Et(Ac,void 0,void 0,{sqrt:td}),Pt=vc({a:BigInt(0),b:BigInt(7),Fp:Gi,n:Bc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{let e=Bc,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ed*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,s=BigInt("0x100000000000000000000000000000000"),a=Ec(i*r,e),c=Ec(-n*r,e),f=J(r-a*t-c*o,e),u=J(-a*n-c*i,e),l=f>s,h=u>s;if(l&&(f=e-f),h&&(u=e-u),f>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:l,k1:f,k2neg:h,k2:u}}}},sr),Em=BigInt(0);var Am=Pt.ProjectivePoint;function qr(r,e){e==null&&(e=r.reduce((o,i)=>o+i.length,0));let t=Ze(e),n=0;for(let o of r)t.set(o,n),n+=o.length;return t}function Sc(r){return r==null?!1:typeof r.then=="function"&&typeof r.catch=="function"&&typeof r.finally=="function"}function kc(r,e,t){let n=Bi.digest(t instanceof Uint8Array?t:t.subarray());if(Sc(n))return n.then(({digest:o})=>Pt.verify(e,o,r)).catch(o=>{throw new $r(String(o))});try{return Pt.verify(e,n.digest,r)}catch(o){throw new $r(String(o))}}var po=class{type="secp256k1";raw;_key;constructor(e){this._key=Tc(e),this.raw=Cc(this._key)}toMultihash(){return Ar.digest(tr(this))}toCID(){return we.createV1(114,this.toMultihash())}toString(){return ae.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Ge(this.raw,e.raw)}verify(e,t){return kc(this._key,t,e)}};function Nc(r){return new po(r)}function Cc(r){return Pt.ProjectivePoint.fromHex(r).toRawBytes(!0)}function Tc(r){try{return Pt.ProjectivePoint.fromHex(r),r}catch(e){throw new qt(String(e))}}function Ic(r){let{Type:e,Data:t}=it.decode(r),n=t??new Uint8Array;switch(e){case fe.RSA:return Ki(n);case fe.Ed25519:return ea(n);case fe.secp256k1:return Nc(n);default:throw new en}}function tr(r){return it.encode({Type:fe[r.type],Data:r.raw})}function rd(r,e){try{if(typeof r=="string"&&r.length>0)return nd(r);if(typeof r=="number"&&isFinite(r))return e?.long?id(r):od(r);throw new Error("Value is not a string or number.")}catch(t){let n=sd(t)?`${t.message}. value=${JSON.stringify(r)}`:"An unknown error has occured.";throw new Error(n)}}function nd(r){if(r=String(r),r.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");let e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!e)return NaN;let t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*315576e5;case"weeks":case"week":case"w":return t*6048e5;case"days":case"day":case"d":return t*864e5;case"hours":case"hour":case"hrs":case"hr":case"h":return t*36e5;case"minutes":case"minute":case"mins":case"min":case"m":return t*6e4;case"seconds":case"second":case"secs":case"sec":case"s":return t*1e3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}var mo=rd;function od(r){let e=Math.abs(r);return e>=864e5?`${Math.round(r/864e5)}d`:e>=36e5?`${Math.round(r/36e5)}h`:e>=6e4?`${Math.round(r/6e4)}m`:e>=1e3?`${Math.round(r/1e3)}s`:`${r}ms`}function id(r){let e=Math.abs(r);return e>=864e5?go(r,e,864e5,"day"):e>=36e5?go(r,e,36e5,"hour"):e>=6e4?go(r,e,6e4,"minute"):e>=1e3?go(r,e,1e3,"second"):`${r} ms`}function go(r,e,t,n){let o=e>=t*1.5;return`${Math.round(r/t)} ${n}${o?"s":""}`}function sd(r){return typeof r=="object"&&r!==null&&"message"in r}function ji(r){t.debug=t,t.default=t,t.coerce=c,t.disable=i,t.enable=o,t.enabled=s,t.humanize=mo,t.destroy=f,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let l=0;for(let h=0;h<u.length;h++)l=(l<<5)-l+u.charCodeAt(h),l|=0;return t.colors[Math.abs(l)%t.colors.length]}t.selectColor=e;function t(u){let l,h=null,S,k;function y(...d){if(!y.enabled)return;let v=y,T=Number(new Date),w=T-(l||T);v.diff=w,v.prev=l,v.curr=T,l=T,d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let N=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(L,U)=>{if(L==="%%")return"%";N++;let x=t.formatters[U];if(typeof x=="function"){let b=d[N];L=x.call(v,b),d.splice(N,1),N--}return L}),t.formatArgs.call(v,d),(v.log||t.log).apply(v,d)}return y.namespace=u,y.useColors=t.useColors(),y.color=t.selectColor(u),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(S!==t.namespaces&&(S=t.namespaces,k=t.enabled(u)),k),set:d=>{h=d}}),typeof t.init=="function"&&t.init(y),y}function n(u,l){let h=t(this.namespace+(typeof l>"u"?":":l)+u);return h.log=this.log,h}function o(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let l,h=(typeof u=="string"?u:"").split(/[\s,]+/),S=h.length;for(l=0;l<S;l++)h[l]&&(u=h[l].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function i(){let u=[...t.names.map(a),...t.skips.map(a).map(l=>"-"+l)].join(",");return t.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let l,h;for(l=0,h=t.skips.length;l<h;l++)if(t.skips[l].test(u))return!1;for(l=0,h=t.names.length;l<h;l++)if(t.names[l].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack??u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.setupFormatters(t.formatters),t.enable(t.load()),t}var yo=dd(),ad=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function cd(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function ud(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+mo(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),r.splice(n,0,e)}var ld=console.debug??console.log??(()=>{});function fd(r){try{r?yo?.setItem("debug",r):yo?.removeItem("debug")}catch{}}function hd(){let r;try{r=yo?.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function dd(){try{return localStorage}catch{}}function pd(r){r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}var Uc=ji({formatArgs:ud,save:fd,load:hd,useColors:cd,setupFormatters:pd,colors:ad,storage:yo,log:ld});var Ne=Uc;Ne.formatters.b=r=>r==null?"undefined":ae.baseEncode(r);Ne.formatters.t=r=>r==null?"undefined":yt.baseEncode(r);Ne.formatters.m=r=>r==null?"undefined":mi.baseEncode(r);Ne.formatters.p=r=>r==null?"undefined":r.toString();Ne.formatters.c=r=>r==null?"undefined":r.toString();Ne.formatters.k=r=>r==null?"undefined":r.toString();Ne.formatters.a=r=>r==null?"undefined":r.toString();function gd(r){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=r,e.destroy=()=>!0,e.extend=()=>e,e}function xo(r){let e=gd(`${r}:trace`);return Ne.enabled(`${r}:trace`)&&Ne.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(e=Ne(`${r}:trace`)),Object.assign(Ne(r),{error:Ne(`${r}:error`),trace:e})}var md="/",yd=new TextEncoder().encode(md),Ty=yd[0];var os=ms(_c(),1);var wo=class extends Error{static name="SignatureCreationError";constructor(e="Record signature creation failed"){super(e),this.name="SignatureCreationError"}},pt=class extends Error{static name="SignatureVerificationError";constructor(e="Record signature verification failed"){super(e),this.name="SignatureVerificationError"}};var zr=class extends Error{static name="UnsupportedValidityError";constructor(e="The validity type is unsupported"){super(e),this.name="UnsupportedValidityError"}};var Gr=class extends Error{static name="InvalidValueError";constructor(e="Value must be a valid content path starting with /"){super(e),this.name="InvalidValueError"}},bo=class extends Error{static name="InvalidRecordDataError";constructor(e="Invalid record data"){super(e),this.name="InvalidRecordDataError"}};var Ie;(function(r){let e;(function(o){o.EOL="EOL"})(e=r.ValidityType||(r.ValidityType={}));let t;(function(o){o[o.EOL=0]="EOL"})(t||(t={})),function(o){o.codec=()=>_r(t)}(e=r.ValidityType||(r.ValidityType={}));let n;r.codec=()=>(n==null&&(n=ir((o,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),o.value!=null&&(i.uint32(10),i.bytes(o.value)),o.signatureV1!=null&&(i.uint32(18),i.bytes(o.signatureV1)),o.validityType!=null&&(i.uint32(24),r.ValidityType.codec().encode(o.validityType,i)),o.validity!=null&&(i.uint32(34),i.bytes(o.validity)),o.sequence!=null&&(i.uint32(40),i.uint64(o.sequence)),o.ttl!=null&&(i.uint32(48),i.uint64(o.ttl)),o.pubKey!=null&&(i.uint32(58),i.bytes(o.pubKey)),o.signatureV2!=null&&(i.uint32(66),i.bytes(o.signatureV2)),o.data!=null&&(i.uint32(74),i.bytes(o.data)),s.lengthDelimited!==!1&&i.ldelim()},(o,i,s={})=>{let a={},c=i==null?o.len:o.pos+i;for(;o.pos<c;){let f=o.uint32();switch(f>>>3){case 1:{a.value=o.bytes();break}case 2:{a.signatureV1=o.bytes();break}case 3:{a.validityType=r.ValidityType.codec().decode(o);break}case 4:{a.validity=o.bytes();break}case 5:{a.sequence=o.uint64();break}case 6:{a.ttl=o.uint64();break}case 7:{a.pubKey=o.bytes();break}case 8:{a.signatureV2=o.bytes();break}case 9:{a.data=o.bytes();break}default:{o.skipType(f&7);break}}}return a})),n),r.encode=o=>nr(o,r.codec()),r.decode=(o,i)=>rr(o,r.codec(),i)})(Ie||(Ie={}));var xd=["string","number","bigint","symbol"],wd=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Rc(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(xd.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(bd(r))return"Buffer";let t=vd(r);return t||"Object"}function bd(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function vd(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(wd.includes(e))return e}var g=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};g.uint=new g(0,"uint",!0);g.negint=new g(1,"negint",!0);g.bytes=new g(2,"bytes",!0);g.string=new g(3,"string",!0);g.array=new g(4,"array",!1);g.map=new g(5,"map",!1);g.tag=new g(6,"tag",!1);g.float=new g(7,"float",!0);g.false=new g(7,"false",!0);g.true=new g(7,"true",!0);g.null=new g(7,"null",!0);g.undefined=new g(7,"undefined",!0);g.break=new g(7,"break",!0);var V=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var dr=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Bd=new TextDecoder,Ed=new TextEncoder;function vo(r){return dr&&globalThis.Buffer.isBuffer(r)}function Wi(r){return r instanceof Uint8Array?vo(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var Hc=dr?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):Lc(r,e,t):(r,e,t)=>t-e>64?Bd.decode(r.subarray(e,t)):Lc(r,e,t),Oc=dr?r=>r.length>64?globalThis.Buffer.from(r):Vc(r):r=>r.length>64?Ed.encode(r):Vc(r),Xe=r=>Uint8Array.from(r),pr=dr?(r,e,t)=>vo(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),Dc=dr?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),Wi(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let o of r)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},Mc=dr?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function $c(r,e){if(vo(r)&&vo(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function Vc(r){let e=[],t=0;for(let n=0;n<r.length;n++){let o=r.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e}function Lc(r,e,t){let n=[];for(;e<t;){let o=r[e],i=null,s=o>239?4:o>223?3:o>191?2:1;if(e+s<=t){let a,c,f,u;switch(s){case 1:o<128&&(i=o);break;case 2:a=r[e+1],(a&192)===128&&(u=(o&31)<<6|a&63,u>127&&(i=u));break;case 3:a=r[e+1],c=r[e+2],(a&192)===128&&(c&192)===128&&(u=(o&15)<<12|(a&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:a=r[e+1],c=r[e+2],f=r[e+3],(a&192)===128&&(c&192)===128&&(f&192)===128&&(u=(o&15)<<18|(a&63)<<12|(c&63)<<6|f&63,u>65535&&u<1114112&&(i=u))}}i===null?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),e+=s}return Ad(n)}var Fc=4096;function Ad(r){let e=r.length;if(e<=Fc)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Fc));return t}var Sd=256,jr=class{constructor(e=Sd){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let o=t.length-(this.maxCursor-this.cursor)-1;t.set(e,o)}else{if(t){let o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Mc(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=pr(n,0,this.cursor)}else t=Dc(this.chunks,this.cursor);return e&&this.reset(),t}};var $="CBOR decode error:",Ji="CBOR encode error:",Zr=[];Zr[23]=1;Zr[24]=2;Zr[25]=3;Zr[26]=5;Zr[27]=9;function gt(r,e,t){if(r.length-e<t)throw new Error(`${$} not enough data for type`)}var ue=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Ue(r,e,t){gt(r,e,1);let n=r[e];if(t.strict===!0&&n<ue[0])throw new Error(`${$} integer encoded in more bytes than necessary (strict decode)`);return n}function _e(r,e,t){gt(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<ue[1])throw new Error(`${$} integer encoded in more bytes than necessary (strict decode)`);return n}function Re(r,e,t){gt(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<ue[2])throw new Error(`${$} integer encoded in more bytes than necessary (strict decode)`);return n}function Ve(r,e,t){gt(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],o=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&i<ue[3])throw new Error(`${$} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(t.allowBigInt===!0)return i;throw new Error(`${$} integers outside of the safe integer range are not supported`)}function Pc(r,e,t,n){return new V(g.uint,Ue(r,e+1,n),2)}function Kc(r,e,t,n){return new V(g.uint,_e(r,e+1,n),3)}function qc(r,e,t,n){return new V(g.uint,Re(r,e+1,n),5)}function zc(r,e,t,n){return new V(g.uint,Ve(r,e+1,n),9)}function Fe(r,e){return pe(r,0,e.value)}function pe(r,e,t){if(t<ue[0]){let n=Number(t);r.push([e|n])}else if(t<ue[1]){let n=Number(t);r.push([e|24,n])}else if(t<ue[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<ue[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<ue[4]){let o=[e|27,0,0,0,0,0,0,0],i=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=s&255,s=s>>8,o[3]=s&255,s=s>>8,o[2]=s&255,s=s>>8,o[1]=s&255,r.push(o)}else throw new Error(`${$} encountered BigInt larger than allowable range`)}}Fe.encodedSize=function(e){return pe.encodedSize(e.value)};pe.encodedSize=function(e){return e<ue[0]?1:e<ue[1]?2:e<ue[2]?3:e<ue[3]?5:9};Fe.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function Gc(r,e,t,n){return new V(g.negint,-1-Ue(r,e+1,n),2)}function jc(r,e,t,n){return new V(g.negint,-1-_e(r,e+1,n),3)}function Zc(r,e,t,n){return new V(g.negint,-1-Re(r,e+1,n),5)}var Yi=BigInt(-1),Wc=BigInt(1);function Jc(r,e,t,n){let o=Ve(r,e+1,n);if(typeof o!="bigint"){let i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new V(g.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${$} integers outside of the safe integer range are not supported`);return new V(g.negint,Yi-BigInt(o),9)}function Bo(r,e){let t=e.value,n=typeof t=="bigint"?t*Yi-Wc:t*-1-1;pe(r,e.type.majorEncoded,n)}Bo.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*Yi-Wc:t*-1-1;return n<ue[0]?1:n<ue[1]?2:n<ue[2]?3:n<ue[3]?5:9};Bo.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function Wr(r,e,t,n){gt(r,e,t+n);let o=pr(r,e+t,e+t+n);return new V(g.bytes,o,t+n)}function Yc(r,e,t,n){return Wr(r,e,1,t)}function Xc(r,e,t,n){return Wr(r,e,2,Ue(r,e+1,n))}function Qc(r,e,t,n){return Wr(r,e,3,_e(r,e+1,n))}function eu(r,e,t,n){return Wr(r,e,5,Re(r,e+1,n))}function tu(r,e,t,n){let o=Ve(r,e+1,n);if(typeof o=="bigint")throw new Error(`${$} 64-bit integer bytes lengths not supported`);return Wr(r,e,9,o)}function Eo(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===g.string?Oc(r.value):r.value),r.encodedBytes}function gr(r,e){let t=Eo(e);pe(r,e.type.majorEncoded,t.length),r.push(t)}gr.encodedSize=function(e){let t=Eo(e);return pe.encodedSize(t.length)+t.length};gr.compareTokens=function(e,t){return Cd(Eo(e),Eo(t))};function Cd(r,e){return r.length<e.length?-1:r.length>e.length?1:$c(r,e)}function Jr(r,e,t,n,o){let i=t+n;gt(r,e,i);let s=new V(g.string,Hc(r,e+t,e+i),i);return o.retainStringBytes===!0&&(s.byteValue=pr(r,e+t,e+i)),s}function ru(r,e,t,n){return Jr(r,e,1,t,n)}function nu(r,e,t,n){return Jr(r,e,2,Ue(r,e+1,n),n)}function ou(r,e,t,n){return Jr(r,e,3,_e(r,e+1,n),n)}function iu(r,e,t,n){return Jr(r,e,5,Re(r,e+1,n),n)}function su(r,e,t,n){let o=Ve(r,e+1,n);if(typeof o=="bigint")throw new Error(`${$} 64-bit integer string lengths not supported`);return Jr(r,e,9,o,n)}var au=gr;function mr(r,e,t,n){return new V(g.array,n,t)}function cu(r,e,t,n){return mr(r,e,1,t)}function uu(r,e,t,n){return mr(r,e,2,Ue(r,e+1,n))}function lu(r,e,t,n){return mr(r,e,3,_e(r,e+1,n))}function fu(r,e,t,n){return mr(r,e,5,Re(r,e+1,n))}function hu(r,e,t,n){let o=Ve(r,e+1,n);if(typeof o=="bigint")throw new Error(`${$} 64-bit integer array lengths not supported`);return mr(r,e,9,o)}function du(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${$} indefinite length items not allowed`);return mr(r,e,1,1/0)}function Ao(r,e){pe(r,g.array.majorEncoded,e.value)}Ao.compareTokens=Fe.compareTokens;Ao.encodedSize=function(e){return pe.encodedSize(e.value)};function yr(r,e,t,n){return new V(g.map,n,t)}function pu(r,e,t,n){return yr(r,e,1,t)}function gu(r,e,t,n){return yr(r,e,2,Ue(r,e+1,n))}function mu(r,e,t,n){return yr(r,e,3,_e(r,e+1,n))}function yu(r,e,t,n){return yr(r,e,5,Re(r,e+1,n))}function xu(r,e,t,n){let o=Ve(r,e+1,n);if(typeof o=="bigint")throw new Error(`${$} 64-bit integer map lengths not supported`);return yr(r,e,9,o)}function wu(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${$} indefinite length items not allowed`);return yr(r,e,1,1/0)}function So(r,e){pe(r,g.map.majorEncoded,e.value)}So.compareTokens=Fe.compareTokens;So.encodedSize=function(e){return pe.encodedSize(e.value)};function bu(r,e,t,n){return new V(g.tag,t,1)}function vu(r,e,t,n){return new V(g.tag,Ue(r,e+1,n),2)}function Bu(r,e,t,n){return new V(g.tag,_e(r,e+1,n),3)}function Eu(r,e,t,n){return new V(g.tag,Re(r,e+1,n),5)}function Au(r,e,t,n){return new V(g.tag,Ve(r,e+1,n),9)}function ko(r,e){pe(r,g.tag.majorEncoded,e.value)}ko.compareTokens=Fe.compareTokens;ko.encodedSize=function(e){return pe.encodedSize(e.value)};var Rd=20,Vd=21,Ld=22,Fd=23;function Su(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${$} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new V(g.null,null,1):new V(g.undefined,void 0,1)}function ku(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${$} indefinite length items not allowed`);return new V(g.break,void 0,1)}function Xi(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${$} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${$} Infinity values are not supported`)}return new V(g.float,r,e)}function Cu(r,e,t,n){return Xi(Qi(r,e+1),3,n)}function Tu(r,e,t,n){return Xi(es(r,e+1),5,n)}function Nu(r,e,t,n){return Xi(Ru(r,e+1),9,n)}function Co(r,e,t){let n=e.value;if(n===!1)r.push([g.float.majorEncoded|Rd]);else if(n===!0)r.push([g.float.majorEncoded|Vd]);else if(n===null)r.push([g.float.majorEncoded|Ld]);else if(n===void 0)r.push([g.float.majorEncoded|Fd]);else{let o,i=!1;(!t||t.float64!==!0)&&(Uu(n),o=Qi(qe,1),n===o||Number.isNaN(n)?(qe[0]=249,r.push(qe.slice(0,3)),i=!0):(_u(n),o=es(qe,1),n===o&&(qe[0]=250,r.push(qe.slice(0,5)),i=!0))),i||(Hd(n),o=Ru(qe,1),qe[0]=251,r.push(qe.slice(0,9)))}}Co.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){Uu(n);let o=Qi(qe,1);if(n===o||Number.isNaN(n))return 3;if(_u(n),o=es(qe,1),n===o)return 5}return 9};var Iu=new ArrayBuffer(9),He=new DataView(Iu,1),qe=new Uint8Array(Iu,0);function Uu(r){if(r===1/0)He.setUint16(0,31744,!1);else if(r===-1/0)He.setUint16(0,64512,!1);else if(Number.isNaN(r))He.setUint16(0,32256,!1);else{He.setFloat32(0,r);let e=He.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)He.setUint16(0,31744,!1);else if(t===0)He.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let o=t-127;o<-24?He.setUint16(0,0):o<-14?He.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):He.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Qi(r,e){if(r.length-e<2)throw new Error(`${$} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,o=t&1023,i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,t&32768?-i:i}function _u(r){He.setFloat32(0,r,!1)}function es(r,e){if(r.length-e<4)throw new Error(`${$} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function Hd(r){He.setFloat64(0,r,!1)}function Ru(r,e){if(r.length-e<8)throw new Error(`${$} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}Co.compareTokens=Fe.compareTokens;function Z(r,e,t){throw new Error(`${$} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function To(r){return()=>{throw new Error(`${$} ${r}`)}}var C=[];for(let r=0;r<=23;r++)C[r]=Z;C[24]=Pc;C[25]=Kc;C[26]=qc;C[27]=zc;C[28]=Z;C[29]=Z;C[30]=Z;C[31]=Z;for(let r=32;r<=55;r++)C[r]=Z;C[56]=Gc;C[57]=jc;C[58]=Zc;C[59]=Jc;C[60]=Z;C[61]=Z;C[62]=Z;C[63]=Z;for(let r=64;r<=87;r++)C[r]=Yc;C[88]=Xc;C[89]=Qc;C[90]=eu;C[91]=tu;C[92]=Z;C[93]=Z;C[94]=Z;C[95]=To("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)C[r]=ru;C[120]=nu;C[121]=ou;C[122]=iu;C[123]=su;C[124]=Z;C[125]=Z;C[126]=Z;C[127]=To("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)C[r]=cu;C[152]=uu;C[153]=lu;C[154]=fu;C[155]=hu;C[156]=Z;C[157]=Z;C[158]=Z;C[159]=du;for(let r=160;r<=183;r++)C[r]=pu;C[184]=gu;C[185]=mu;C[186]=yu;C[187]=xu;C[188]=Z;C[189]=Z;C[190]=Z;C[191]=wu;for(let r=192;r<=215;r++)C[r]=bu;C[216]=vu;C[217]=Bu;C[218]=Eu;C[219]=Au;C[220]=Z;C[221]=Z;C[222]=Z;C[223]=Z;for(let r=224;r<=243;r++)C[r]=To("simple values are not supported");C[244]=Z;C[245]=Z;C[246]=Z;C[247]=Su;C[248]=To("simple values are not supported");C[249]=Cu;C[250]=Tu;C[251]=Nu;C[252]=Z;C[253]=Z;C[254]=Z;C[255]=ku;var ze=[];for(let r=0;r<24;r++)ze[r]=new V(g.uint,r,1);for(let r=-1;r>=-24;r--)ze[31-r]=new V(g.negint,r,1);ze[64]=new V(g.bytes,new Uint8Array(0),1);ze[96]=new V(g.string,"",1);ze[128]=new V(g.array,0,1);ze[160]=new V(g.map,0,1);ze[244]=new V(g.false,!1,1);ze[245]=new V(g.true,!0,1);ze[246]=new V(g.null,null,1);function Vu(r){switch(r.type){case g.false:return Xe([244]);case g.true:return Xe([245]);case g.null:return Xe([246]);case g.bytes:return r.value.length?void 0:Xe([64]);case g.string:return r.value===""?Xe([96]):void 0;case g.array:return r.value===0?Xe([128]):void 0;case g.map:return r.value===0?Xe([160]):void 0;case g.uint:return r.value<24?Xe([Number(r.value)]):void 0;case g.negint:if(r.value>=-24)return Xe([31-Number(r.value)])}}var Dd={float64:!1,mapSorter:Pd,quickEncodeToken:Vu};function Md(){let r=[];return r[g.uint.major]=Fe,r[g.negint.major]=Bo,r[g.bytes.major]=gr,r[g.string.major]=au,r[g.array.major]=Ao,r[g.map.major]=So,r[g.tag.major]=ko,r[g.float.major]=Co,r}var Lu=Md(),ts=new jr,Io=class r{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${Ji} object contains circular references`);return new r(t,e)}},Ut={null:new V(g.null,null),undefined:new V(g.undefined,void 0),true:new V(g.true,!0),false:new V(g.false,!1),emptyArray:new V(g.array,0),emptyMap:new V(g.map,0)},_t={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new V(g.float,r):r>=0?new V(g.uint,r):new V(g.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new V(g.uint,r):new V(g.negint,r)},Uint8Array(r,e,t,n){return new V(g.bytes,r)},string(r,e,t,n){return new V(g.string,r)},boolean(r,e,t,n){return r?Ut.true:Ut.false},null(r,e,t,n){return Ut.null},undefined(r,e,t,n){return Ut.undefined},ArrayBuffer(r,e,t,n){return new V(g.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new V(g.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[Ut.emptyArray,new V(g.break)]:Ut.emptyArray;n=Io.createCheck(n,r);let o=[],i=0;for(let s of r)o[i++]=No(s,t,n);return t.addBreakTokens?[new V(g.array,r.length),o,new V(g.break)]:[new V(g.array,r.length),o]},Object(r,e,t,n){let o=e!=="Object",i=o?r.keys():Object.keys(r),s=o?r.size:i.length;if(!s)return t.addBreakTokens===!0?[Ut.emptyMap,new V(g.break)]:Ut.emptyMap;n=Io.createCheck(n,r);let a=[],c=0;for(let f of i)a[c++]=[No(f,t,n),No(o?r.get(f):r[f],t,n)];return $d(a,t),t.addBreakTokens?[new V(g.map,s),a,new V(g.break)]:[new V(g.map,s),a]}};_t.Map=_t.Object;_t.Buffer=_t.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))_t[`${r}Array`]=_t.DataView;function No(r,e={},t){let n=Rc(r),o=e&&e.typeEncoders&&e.typeEncoders[n]||_t[n];if(typeof o=="function"){let s=o(r,n,e,t);if(s!=null)return s}let i=_t[n];if(!i)throw new Error(`${Ji} unsupported type: ${n}`);return i(r,n,e,t)}function $d(r,e){e.mapSorter&&r.sort(e.mapSorter)}function Pd(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let o=t.type.major,i=Lu[o].compareTokens(t,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function Fu(r,e,t,n){if(Array.isArray(e))for(let o of e)Fu(r,o,t,n);else t[e.type.major](r,e,n)}function Kd(r,e,t){let n=No(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let o=t.quickEncodeToken(n);if(o)return o;let i=e[n.type.major];if(i.encodedSize){let s=i.encodedSize(n,t),a=new jr(s);if(i(a,n,t),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Wi(a.chunks[0])}}return ts.reset(),Fu(ts,n,e,t),ts.toBytes(!0)}function rs(r,e){return e=Object.assign({},Dd,e),Kd(r,Lu,e)}var qd={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Uo=class{constructor(e,t={}){this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],t=ze[e];if(t===void 0){let n=C[e];if(!n)throw new Error(`${$} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let o=e&31;t=n(this.data,this._pos,o,this.options)}return this._pos+=t.encodedLength,t}},Yr=Symbol.for("DONE"),_o=Symbol.for("BREAK");function zd(r,e,t){let n=[];for(let o=0;o<r.value;o++){let i=xr(e,t);if(i===_o){if(r.value===1/0)break;throw new Error(`${$} got unexpected break to lengthed array`)}if(i===Yr)throw new Error(`${$} found array but not enough entries (got ${o}, expected ${r.value})`);n[o]=i}return n}function Gd(r,e,t){let n=t.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let s=0;s<r.value;s++){let a=xr(e,t);if(a===_o){if(r.value===1/0)break;throw new Error(`${$} got unexpected break to lengthed map`)}if(a===Yr)throw new Error(`${$} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${$} non-string keys not supported (got ${typeof a})`);if(t.rejectDuplicateMapKeys===!0&&(n&&i.has(a)||!n&&a in o))throw new Error(`${$} found repeat map key "${a}"`);let c=xr(e,t);if(c===Yr)throw new Error(`${$} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?i.set(a,c):o[a]=c}return n?i:o}function xr(r,e){if(r.done())return Yr;let t=r.next();if(t.type===g.break)return _o;if(t.type.terminal)return t.value;if(t.type===g.array)return zd(t,r,e);if(t.type===g.map)return Gd(t,r,e);if(t.type===g.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=xr(r,e);return e.tags[t.value](n)}throw new Error(`${$} tag not supported (${t.value})`)}throw new Error("unsupported")}function Hu(r,e){if(!(r instanceof Uint8Array))throw new Error(`${$} data to decode must be a Uint8Array`);e=Object.assign({},qd,e);let t=e.tokenizer||new Uo(r,e),n=xr(t,e);if(n===Yr)throw new Error(`${$} did not find any content to decode`);if(n===_o)throw new Error(`${$} got unexpected break`);return[n,r.subarray(t.pos())]}function ns(r,e){let[t,n]=Hu(r,e);if(n.length>0)throw new Error(`${$} too many terminals, data makes no sense`);return t}var Zd=xo("ipns:utils"),Du=X("/ipns/"),Wd=114,Jd=0,Yd=18;function Mu(r){let e;if(r.pubKey!=null)try{e=Ic(r.pubKey)}catch(t){throw Zd.error(t),t}if(e!=null)return e}function $u(r,e,t){let n=X(e);return qr([r,t,n])}function Pu(r){let e=X("ipns-signature:");return qr([e,r])}function Ku(r){return"signatureV1"in r?Ie.encode({value:X(r.value),signatureV1:r.signatureV1,validityType:r.validityType,validity:X(r.validity),sequence:r.sequence,ttl:r.ttl,pubKey:r.pubKey,signatureV2:r.signatureV2,data:r.data}):Ie.encode({pubKey:r.pubKey,signatureV2:r.signatureV2,data:r.data})}function qu(r){let e=Ie.decode(r);if(e.sequence!=null&&(e.sequence=BigInt(e.sequence)),e.ttl!=null&&(e.ttl=BigInt(e.ttl)),e.signatureV2==null||e.data==null)throw new pt("Missing data or signatureV2");let t=Zu(e.data),n=Xd(t.Value),o=Be(t.Validity);if(e.value!=null&&e.signatureV1!=null)return Qd(e),{value:n,validityType:Ie.ValidityType.EOL,validity:o,sequence:t.Sequence,ttl:t.TTL,pubKey:e.pubKey,signatureV1:e.signatureV1,signatureV2:e.signatureV2,data:e.data};if(e.signatureV2!=null)return{value:n,validityType:Ie.ValidityType.EOL,validity:o,sequence:t.Sequence,ttl:t.TTL,pubKey:e.pubKey,signatureV2:e.signatureV2,data:e.data};throw new Error("invalid record: does not include signatureV1 or signatureV2")}function zu(r){return qr([Du,r.bytes])}function Gu(r){let e=rn(r.slice(Du.length));if(!Ou(e,Jd)&&!Ou(e,Yd))throw new Qr("Multihash in IPNS key was not identity or sha2-256");return e}function ju(r,e,t,n,o){let i;if(e===Ie.ValidityType.EOL)i=0;else throw new zr("The validity type is unsupported");return rs({Value:r,Validity:t,ValidityType:i,Sequence:n,TTL:o})}function Zu(r){let e=ns(r);if(e.ValidityType===0)e.ValidityType=Ie.ValidityType.EOL;else throw new zr("The validity type is unsupported");return Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),e}function Xd(r){let e=Be(r).trim();if(e.startsWith("/"))return e;try{return`/ipfs/${we.decode(r).toV1().toString()}`}catch{}try{return`/ipfs/${we.parse(e).toV1().toString()}`}catch{}throw new Gr("Value must be a valid content path starting with /")}function Wu(r){if(r!=null){let e=r0(r);if(e!=null)return e.code===Wd?`/ipns/${e.toString(yn)}`:`/ipfs/${e.toV1().toString()}`;if(e0(r))return`/ipns/${yn.encode(r.bytes)}`;let t=r.toString().trim();if(t.startsWith("/")&&t.length>1)return t}throw new Gr("Value must be a valid content path starting with /")}function Qd(r){if(r.data==null)throw new bo("Record data is missing");let e=Zu(r.data);if(!Ge(e.Value,r.value??new Uint8Array(0)))throw new pt('Field "value" did not match between protobuf and CBOR');if(!Ge(e.Validity,r.validity??new Uint8Array(0)))throw new pt('Field "validity" did not match between protobuf and CBOR');if(e.ValidityType!==r.validityType)throw new pt('Field "validityType" did not match between protobuf and CBOR');if(e.Sequence!==r.sequence)throw new pt('Field "sequence" did not match between protobuf and CBOR');if(e.TTL!==r.ttl)throw new pt('Field "ttl" did not match between protobuf and CBOR')}function e0(r){return r.bytes instanceof Uint8Array}function t0(r){return typeof r?.toCID=="function"}function r0(r){if(t0(r))return r.toCID();try{return we.parse(r)}catch{}return we.asCID(r)}function Ou(r,e){return r.code===e}var n0=xo("ipns"),is=60*60*1e9,Ju="/ipns/",o0=Ju.length,ss={v1Compatible:!0,ttlNs:is};async function i0(r,e,t,n,o=ss){let i=new os.default(Date.now()+Number(n)),s=Ie.ValidityType.EOL,a=BigInt(o.ttlNs??is);return Yu(r,e,t,s,i.toString(),a,o)}async function s0(r,e,t,n,o=ss){let i=os.default.fromString(n),s=Ie.ValidityType.EOL,a=BigInt(o.ttlNs??is);return Yu(r,e,t,s,i.toString(),a,o)}var Yu=async(r,e,t,n,o,i,s=ss)=>{t=BigInt(t);let a=X(o),c=Wu(e),f=X(c),u=ju(f,n,a,t,i),l=Pu(u),h=await r.sign(l),S;if(r.type==="RSA"&&(S=tr(r.publicKey)),s.v1Compatible===!0){let k=await a0(r,f,n,a),y={value:c,signatureV1:k,validity:o,validityType:n,sequence:t,ttl:i,signatureV2:h,data:u};return S!=null&&(y.pubKey=S),y}else{let k={value:c,validity:o,validityType:n,sequence:t,ttl:i,signatureV2:h,data:u};return S!=null&&(k.pubKey=S),k}},a0=async(r,e,t,n)=>{try{let o=$u(e,t,n);return await r.sign(o)}catch(o){throw n0.error("record signature creation failed",o),new wo("Record signature creation failed")}};return fl(c0);})();
/*! Bundled license information:

pvtsutils/build/index.js:
  (*!
   * MIT License
   * 
   * Copyright (c) 2017-2022 Peculiar Ventures, LLC
   * 
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   * 
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   * 
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   * 
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

pvutils/build/utils.es.js:
  (*!
   Copyright (c) Peculiar Ventures, LLC
  *)

asn1js/build/index.es.js:
  (*!
   * Copyright (c) 2014, GMO GlobalSign
   * Copyright (c) 2015-2022, Peculiar Ventures
   * All rights reserved.
   * 
   * Author 2014-2019, Yury Strozhevsky
   * 
   * Redistribution and use in source and binary forms, with or without modification,
   * are permitted provided that the following conditions are met:
   * 
   * * Redistributions of source code must retain the above copyright notice, this
   *   list of conditions and the following disclaimer.
   * 
   * * Redistributions in binary form must reproduce the above copyright notice, this
   *   list of conditions and the following disclaimer in the documentation and/or
   *   other materials provided with the distribution.
   * 
   * * Neither the name of the copyright holder nor the names of its
   *   contributors may be used to endorse or promote products derived from
   *   this software without specific prior written permission.
   * 
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
   * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
   * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
   * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   * 
   *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return Ipns}));
